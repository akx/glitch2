/*! For license information please see glitcher.js.LICENSE.txt */
(()=>{var t={526:(t,e)=>{"use strict";e.byteLength=function(t){var e=s(t),r=e[0],n=e[1];return 3*(r+n)/4-n},e.toByteArray=function(t){var e,r,i=s(t),a=i[0],c=i[1],u=new o(function(t,e,r){return 3*(e+r)/4-r}(0,a,c)),f=0,l=c>0?a-4:a;for(r=0;r<l;r+=4)e=n[t.charCodeAt(r)]<<18|n[t.charCodeAt(r+1)]<<12|n[t.charCodeAt(r+2)]<<6|n[t.charCodeAt(r+3)],u[f++]=e>>16&255,u[f++]=e>>8&255,u[f++]=255&e;return 2===c&&(e=n[t.charCodeAt(r)]<<2|n[t.charCodeAt(r+1)]>>4,u[f++]=255&e),1===c&&(e=n[t.charCodeAt(r)]<<10|n[t.charCodeAt(r+1)]<<4|n[t.charCodeAt(r+2)]>>2,u[f++]=e>>8&255,u[f++]=255&e),u},e.fromByteArray=function(t){for(var e,n=t.length,o=n%3,i=[],a=16383,s=0,u=n-o;s<u;s+=a)i.push(c(t,s,s+a>u?u:s+a));return 1===o?(e=t[n-1],i.push(r[e>>2]+r[e<<4&63]+"==")):2===o&&(e=(t[n-2]<<8)+t[n-1],i.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"=")),i.join("")};for(var r=[],n=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0;a<64;++a)r[a]=i[a],n[i.charCodeAt(a)]=a;function s(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function c(t,e,n){for(var o,i,a=[],s=e;s<n;s+=3)o=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),a.push(r[(i=o)>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return a.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},287:(t,e,r)=>{"use strict";const n=r(526),o=r(251),i="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.hp=c,e.IS=50;const a=2147483647;function s(t){if(t>a)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,c.prototype),e}function c(t,e,r){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return l(t)}return u(t,e,r)}function u(t,e,r){if("string"==typeof t)return function(t,e){if("string"==typeof e&&""!==e||(e="utf8"),!c.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const r=0|d(t,e);let n=s(r);const o=n.write(t,e);return o!==r&&(n=n.slice(0,o)),n}(t,e);if(ArrayBuffer.isView(t))return function(t){if(V(t,Uint8Array)){const e=new Uint8Array(t);return h(e.buffer,e.byteOffset,e.byteLength)}return p(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(V(t,ArrayBuffer)||t&&V(t.buffer,ArrayBuffer))return h(t,e,r);if("undefined"!=typeof SharedArrayBuffer&&(V(t,SharedArrayBuffer)||t&&V(t.buffer,SharedArrayBuffer)))return h(t,e,r);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=t.valueOf&&t.valueOf();if(null!=n&&n!==t)return c.from(n,e,r);const o=function(t){if(c.isBuffer(t)){const e=0|m(t.length),r=s(e);return 0===r.length||t.copy(r,0,0,e),r}return void 0!==t.length?"number"!=typeof t.length||J(t.length)?s(0):p(t):"Buffer"===t.type&&Array.isArray(t.data)?p(t.data):void 0}(t);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return c.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function f(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function l(t){return f(t),s(t<0?0:0|m(t))}function p(t){const e=t.length<0?0:0|m(t.length),r=s(e);for(let n=0;n<e;n+=1)r[n]=255&t[n];return r}function h(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r),Object.setPrototypeOf(n,c.prototype),n}function m(t){if(t>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|t}function d(t,e){if(c.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||V(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const r=t.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let o=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return Y(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return W(t).length;default:if(o)return n?-1:Y(t).length;e=(""+e).toLowerCase(),o=!0}}function y(t,e,r){let n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return M(this,e,r);case"utf8":case"utf-8":return E(this,e,r);case"ascii":return I(this,e,r);case"latin1":case"binary":return D(this,e,r);case"base64":return P(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function g(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function v(t,e,r,n,o){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),J(r=+r)&&(r=o?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(o)return-1;r=t.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof e&&(e=c.from(e,n)),c.isBuffer(e))return 0===e.length?-1:b(t,e,r,n,o);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):b(t,[e],r,n,o);throw new TypeError("val must be string, number or Buffer")}function b(t,e,r,n,o){let i,a=1,s=t.length,c=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;a=2,s/=2,c/=2,r/=2}function u(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(o){let n=-1;for(i=r;i<s;i++)if(u(t,i)===u(e,-1===n?0:i-n)){if(-1===n&&(n=i),i-n+1===c)return n*a}else-1!==n&&(i-=i-n),n=-1}else for(r+c>s&&(r=s-c),i=r;i>=0;i--){let r=!0;for(let n=0;n<c;n++)if(u(t,i+n)!==u(e,n)){r=!1;break}if(r)return i}return-1}function w(t,e,r,n){r=Number(r)||0;const o=t.length-r;n?(n=Number(n))>o&&(n=o):n=o;const i=e.length;let a;for(n>i/2&&(n=i/2),a=0;a<n;++a){const n=parseInt(e.substr(2*a,2),16);if(J(n))return a;t[r+a]=n}return a}function O(t,e,r,n){return H(Y(e,t.length-r),t,r,n)}function x(t,e,r,n){return H(function(t){const e=[];for(let r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function j(t,e,r,n){return H(W(e),t,r,n)}function S(t,e,r,n){return H(function(t,e){let r,n,o;const i=[];for(let a=0;a<t.length&&!((e-=2)<0);++a)r=t.charCodeAt(a),n=r>>8,o=r%256,i.push(o),i.push(n);return i}(e,t.length-r),t,r,n)}function P(t,e,r){return 0===e&&r===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,r))}function E(t,e,r){r=Math.min(t.length,r);const n=[];let o=e;for(;o<r;){const e=t[o];let i=null,a=e>239?4:e>223?3:e>191?2:1;if(o+a<=r){let r,n,s,c;switch(a){case 1:e<128&&(i=e);break;case 2:r=t[o+1],128==(192&r)&&(c=(31&e)<<6|63&r,c>127&&(i=c));break;case 3:r=t[o+1],n=t[o+2],128==(192&r)&&128==(192&n)&&(c=(15&e)<<12|(63&r)<<6|63&n,c>2047&&(c<55296||c>57343)&&(i=c));break;case 4:r=t[o+1],n=t[o+2],s=t[o+3],128==(192&r)&&128==(192&n)&&128==(192&s)&&(c=(15&e)<<18|(63&r)<<12|(63&n)<<6|63&s,c>65535&&c<1114112&&(i=c))}}null===i?(i=65533,a=1):i>65535&&(i-=65536,n.push(i>>>10&1023|55296),i=56320|1023&i),n.push(i),o+=a}return function(t){const e=t.length;if(e<=k)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=k));return r}(n)}c.TYPED_ARRAY_SUPPORT=function(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),c.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}}),c.poolSize=8192,c.from=function(t,e,r){return u(t,e,r)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array),c.alloc=function(t,e,r){return function(t,e,r){return f(t),t<=0?s(t):void 0!==e?"string"==typeof r?s(t).fill(e,r):s(t).fill(e):s(t)}(t,e,r)},c.allocUnsafe=function(t){return l(t)},c.allocUnsafeSlow=function(t){return l(t)},c.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==c.prototype},c.compare=function(t,e){if(V(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),V(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),!c.isBuffer(t)||!c.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let r=t.length,n=e.length;for(let o=0,i=Math.min(r,n);o<i;++o)if(t[o]!==e[o]){r=t[o],n=e[o];break}return r<n?-1:n<r?1:0},c.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return c.alloc(0);let r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;const n=c.allocUnsafe(e);let o=0;for(r=0;r<t.length;++r){let e=t[r];if(V(e,Uint8Array))o+e.length>n.length?(c.isBuffer(e)||(e=c.from(e)),e.copy(n,o)):Uint8Array.prototype.set.call(n,e,o);else{if(!c.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(n,o)}o+=e.length}return n},c.byteLength=d,c.prototype._isBuffer=!0,c.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)g(this,e,e+1);return this},c.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)g(this,e,e+3),g(this,e+1,e+2);return this},c.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)g(this,e,e+7),g(this,e+1,e+6),g(this,e+2,e+5),g(this,e+3,e+4);return this},c.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?E(this,0,t):y.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(t){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===c.compare(this,t)},c.prototype.inspect=function(){let t="";const r=e.IS;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"},i&&(c.prototype[i]=c.prototype.inspect),c.prototype.compare=function(t,e,r,n,o){if(V(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),!c.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),e<0||r>t.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&e>=r)return 0;if(n>=o)return-1;if(e>=r)return 1;if(this===t)return 0;let i=(o>>>=0)-(n>>>=0),a=(r>>>=0)-(e>>>=0);const s=Math.min(i,a),u=this.slice(n,o),f=t.slice(e,r);for(let t=0;t<s;++t)if(u[t]!==f[t]){i=u[t],a=f[t];break}return i<a?-1:a<i?1:0},c.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},c.prototype.indexOf=function(t,e,r){return v(this,t,e,r,!0)},c.prototype.lastIndexOf=function(t,e,r){return v(this,t,e,r,!1)},c.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const o=this.length-e;if((void 0===r||r>o)&&(r=o),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let i=!1;for(;;)switch(n){case"hex":return w(this,t,e,r);case"utf8":case"utf-8":return O(this,t,e,r);case"ascii":case"latin1":case"binary":return x(this,t,e,r);case"base64":return j(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,t,e,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const k=4096;function I(t,e,r){let n="";r=Math.min(t.length,r);for(let o=e;o<r;++o)n+=String.fromCharCode(127&t[o]);return n}function D(t,e,r){let n="";r=Math.min(t.length,r);for(let o=e;o<r;++o)n+=String.fromCharCode(t[o]);return n}function M(t,e,r){const n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);let o="";for(let n=e;n<r;++n)o+=K[t[n]];return o}function A(t,e,r){const n=t.slice(e,r);let o="";for(let t=0;t<n.length-1;t+=2)o+=String.fromCharCode(n[t]+256*n[t+1]);return o}function C(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function T(t,e,r,n,o,i){if(!c.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<i)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function L(t,e,r,n,o){$(e,n,o,t,r,7);let i=Number(e&BigInt(4294967295));t[r++]=i,i>>=8,t[r++]=i,i>>=8,t[r++]=i,i>>=8,t[r++]=i;let a=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=a,a>>=8,t[r++]=a,a>>=8,t[r++]=a,a>>=8,t[r++]=a,r}function B(t,e,r,n,o){$(e,n,o,t,r,7);let i=Number(e&BigInt(4294967295));t[r+7]=i,i>>=8,t[r+6]=i,i>>=8,t[r+5]=i,i>>=8,t[r+4]=i;let a=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=a,a>>=8,t[r+2]=a,a>>=8,t[r+1]=a,a>>=8,t[r]=a,r+8}function _(t,e,r,n,o,i){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function U(t,e,r,n,i){return e=+e,r>>>=0,i||_(t,0,r,4),o.write(t,e,r,n,23,4),r+4}function R(t,e,r,n,i){return e=+e,r>>>=0,i||_(t,0,r,8),o.write(t,e,r,n,52,8),r+8}c.prototype.slice=function(t,e){const r=this.length;(t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t);const n=this.subarray(t,e);return Object.setPrototypeOf(n,c.prototype),n},c.prototype.readUintLE=c.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||C(t,e,this.length);let n=this[t],o=1,i=0;for(;++i<e&&(o*=256);)n+=this[t+i]*o;return n},c.prototype.readUintBE=c.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||C(t,e,this.length);let n=this[t+--e],o=1;for(;e>0&&(o*=256);)n+=this[t+--e]*o;return n},c.prototype.readUint8=c.prototype.readUInt8=function(t,e){return t>>>=0,e||C(t,1,this.length),this[t]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(t,e){return t>>>=0,e||C(t,2,this.length),this[t]|this[t+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(t,e){return t>>>=0,e||C(t,2,this.length),this[t]<<8|this[t+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(t,e){return t>>>=0,e||C(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(t,e){return t>>>=0,e||C(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},c.prototype.readBigUInt64LE=Q((function(t){X(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||q(t,this.length-8);const n=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,o=this[++t]+256*this[++t]+65536*this[++t]+r*2**24;return BigInt(n)+(BigInt(o)<<BigInt(32))})),c.prototype.readBigUInt64BE=Q((function(t){X(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||q(t,this.length-8);const n=e*2**24+65536*this[++t]+256*this[++t]+this[++t],o=this[++t]*2**24+65536*this[++t]+256*this[++t]+r;return(BigInt(n)<<BigInt(32))+BigInt(o)})),c.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||C(t,e,this.length);let n=this[t],o=1,i=0;for(;++i<e&&(o*=256);)n+=this[t+i]*o;return o*=128,n>=o&&(n-=Math.pow(2,8*e)),n},c.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||C(t,e,this.length);let n=e,o=1,i=this[t+--n];for(;n>0&&(o*=256);)i+=this[t+--n]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*e)),i},c.prototype.readInt8=function(t,e){return t>>>=0,e||C(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},c.prototype.readInt16LE=function(t,e){t>>>=0,e||C(t,2,this.length);const r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt16BE=function(t,e){t>>>=0,e||C(t,2,this.length);const r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt32LE=function(t,e){return t>>>=0,e||C(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},c.prototype.readInt32BE=function(t,e){return t>>>=0,e||C(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},c.prototype.readBigInt64LE=Q((function(t){X(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||q(t,this.length-8);const n=this[t+4]+256*this[t+5]+65536*this[t+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)})),c.prototype.readBigInt64BE=Q((function(t){X(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||q(t,this.length-8);const n=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(n)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+r)})),c.prototype.readFloatLE=function(t,e){return t>>>=0,e||C(t,4,this.length),o.read(this,t,!0,23,4)},c.prototype.readFloatBE=function(t,e){return t>>>=0,e||C(t,4,this.length),o.read(this,t,!1,23,4)},c.prototype.readDoubleLE=function(t,e){return t>>>=0,e||C(t,8,this.length),o.read(this,t,!0,52,8)},c.prototype.readDoubleBE=function(t,e){return t>>>=0,e||C(t,8,this.length),o.read(this,t,!1,52,8)},c.prototype.writeUintLE=c.prototype.writeUIntLE=function(t,e,r,n){t=+t,e>>>=0,r>>>=0,n||T(this,t,e,r,Math.pow(2,8*r)-1,0);let o=1,i=0;for(this[e]=255&t;++i<r&&(o*=256);)this[e+i]=t/o&255;return e+r},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(t,e,r,n){t=+t,e>>>=0,r>>>=0,n||T(this,t,e,r,Math.pow(2,8*r)-1,0);let o=r-1,i=1;for(this[e+o]=255&t;--o>=0&&(i*=256);)this[e+o]=t/i&255;return e+r},c.prototype.writeUint8=c.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||T(this,t,e,1,255,0),this[e]=255&t,e+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||T(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||T(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||T(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||T(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},c.prototype.writeBigUInt64LE=Q((function(t,e=0){return L(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeBigUInt64BE=Q((function(t,e=0){return B(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e>>>=0,!n){const n=Math.pow(2,8*r-1);T(this,t,e,r,n-1,-n)}let o=0,i=1,a=0;for(this[e]=255&t;++o<r&&(i*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/i|0)-a&255;return e+r},c.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e>>>=0,!n){const n=Math.pow(2,8*r-1);T(this,t,e,r,n-1,-n)}let o=r-1,i=1,a=0;for(this[e+o]=255&t;--o>=0&&(i*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/i|0)-a&255;return e+r},c.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||T(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},c.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||T(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},c.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||T(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},c.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||T(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},c.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||T(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},c.prototype.writeBigInt64LE=Q((function(t,e=0){return L(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeBigInt64BE=Q((function(t,e=0){return B(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeFloatLE=function(t,e,r){return U(this,t,e,!0,r)},c.prototype.writeFloatBE=function(t,e,r){return U(this,t,e,!1,r)},c.prototype.writeDoubleLE=function(t,e,r){return R(this,t,e,!0,r)},c.prototype.writeDoubleBE=function(t,e,r){return R(this,t,e,!1,r)},c.prototype.copy=function(t,e,r,n){if(!c.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);const o=n-r;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,r,n):Uint8Array.prototype.set.call(t,this.subarray(r,n),e),o},c.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!c.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===t.length){const e=t.charCodeAt(0);("utf8"===n&&e<128||"latin1"===n)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;let o;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(o=e;o<r;++o)this[o]=t;else{const i=c.isBuffer(t)?t:c.from(t,n),a=i.length;if(0===a)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(o=0;o<r-e;++o)this[o+e]=i[o%a]}return this};const N={};function F(t,e,r){N[t]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function z(t){let e="",r=t.length;const n="-"===t[0]?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function $(t,e,r,n,o,i){if(t>r||t<e){const n="bigint"==typeof e?"n":"";let o;throw o=i>3?0===e||e===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(i+1)}${n}`:`>= -(2${n} ** ${8*(i+1)-1}${n}) and < 2 ** ${8*(i+1)-1}${n}`:`>= ${e}${n} and <= ${r}${n}`,new N.ERR_OUT_OF_RANGE("value",o,t)}!function(t,e,r){X(e,"offset"),void 0!==t[e]&&void 0!==t[e+r]||q(e,t.length-(r+1))}(n,o,i)}function X(t,e){if("number"!=typeof t)throw new N.ERR_INVALID_ARG_TYPE(e,"number",t)}function q(t,e,r){if(Math.floor(t)!==t)throw X(t,r),new N.ERR_OUT_OF_RANGE(r||"offset","an integer",t);if(e<0)throw new N.ERR_BUFFER_OUT_OF_BOUNDS;throw new N.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}F("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),F("ERR_INVALID_ARG_TYPE",(function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`}),TypeError),F("ERR_OUT_OF_RANGE",(function(t,e,r){let n=`The value of "${t}" is out of range.`,o=r;return Number.isInteger(r)&&Math.abs(r)>2**32?o=z(String(r)):"bigint"==typeof r&&(o=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(o=z(o)),o+="n"),n+=` It must be ${e}. Received ${o}`,n}),RangeError);const G=/[^+/0-9A-Za-z-_]/g;function Y(t,e){let r;e=e||1/0;const n=t.length;let o=null;const i=[];for(let a=0;a<n;++a){if(r=t.charCodeAt(a),r>55295&&r<57344){if(!o){if(r>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(a+1===n){(e-=3)>-1&&i.push(239,191,189);continue}o=r;continue}if(r<56320){(e-=3)>-1&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(e-=3)>-1&&i.push(239,191,189);if(o=null,r<128){if((e-=1)<0)break;i.push(r)}else if(r<2048){if((e-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function W(t){return n.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(G,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function H(t,e,r,n){let o;for(o=0;o<n&&!(o+r>=e.length||o>=t.length);++o)e[o+r]=t[o];return o}function V(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function J(t){return t!=t}const K=function(){const t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let o=0;o<16;++o)e[n+o]=t[r]+t[o]}return e}();function Q(t){return"undefined"==typeof BigInt?Z:t}function Z(){throw new Error("BigInt not supported")}},30:(t,e,r)=>{"use strict";r.d(e,{A:()=>m});var n=r(601),o=r.n(n),i=r(314),a=r.n(i),s=r(417),c=r.n(s),u=new URL(r(516),r.b),f=new URL(r(298),r.b),l=a()(o()),p=c()(u),h=c()(f);l.push([t.id,`@font-face {\n  font-family: 'icomoon';\n  src: url(${p}) format('woff2');\n  font-weight: normal;\n  font-style: normal;\n}\n[class^='icon-'],\n[class*=' icon-'] {\n  /* use !important to prevent issues with browser extensions that change fonts */\n  font-family: 'icomoon' !important;\n  speak: none;\n  font-style: normal;\n  font-weight: normal;\n  font-variant: normal;\n  text-transform: none;\n  line-height: 1;\n  /* Better Font Rendering =========== */\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n.icon-times:before {\n  content: '\\e900';\n}\n.icon-plus:before {\n  content: '\\e901';\n}\n.icon-arrow-right-thick:before {\n  content: '\\e902';\n}\n.icon-arrow-left-thick:before {\n  content: '\\e903';\n}\n.icon-th-small:before {\n  content: '\\e904';\n}\n.icon-arrow-up-thick:before {\n  content: '\\e905';\n}\n.icon-arrow-down-thick:before {\n  content: '\\e906';\n}\n.icon-flash:before {\n  content: '\\e907';\n}\n.icon-camera:before {\n  content: '\\e908';\n}\n.icon-arrow-sync:before {\n  content: '\\e909';\n}\n.icon-arrow-shuffle:before {\n  content: '\\e90a';\n}\n.icon-arrow-maximise:before {\n  content: '\\e90b';\n}\n.icon-power:before {\n  content: '\\e90c';\n}\n.icon-trash:before {\n  content: '\\e90d';\n}\nbody {\n  background: #000 url(${h});\n  margin: 0;\n}\n* {\n  font-size: 8pt;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';\n  box-sizing: border-box;\n}\nbody,\ninput,\nselect,\ntextarea,\nbutton,\na {\n  color: #dfeff1;\n}\ninput,\nselect,\ntextarea,\nbutton {\n  background: none;\n  border: none;\n}\nbutton,\nselect {\n  border: 1px solid #dfeff1;\n}\n#target {\n  position: absolute;\n  right: 0;\n  top: 0;\n}\nbody.zoom-canvas-to-fit #target {\n  max-height: 100vh;\n  max-width: 100vw;\n}\n#ui-container {\n  position: absolute;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  padding: 3px;\n  overflow-y: auto;\n  overflow-x: hidden;\n}\n.button-row {\n  display: flex;\n  margin-bottom: 2px;\n}\n.button-row > * {\n  flex: 1;\n  white-space: nowrap;\n}\n.title {\n  margin-bottom: 3px;\n}\n.title a {\n  margin-right: 4px;\n}\n.title a.by {\n  font-weight: bold;\n  text-decoration: none;\n}\n.load-image {\n  margin-bottom: 4px;\n}\n.recorder {\n  color: #fa4d8c;\n}\n.recorder input,\n.recorder select,\n.recorder textarea,\n.recorder button,\n.recorder a {\n  color: #fa4d8c;\n}\n.recorder button,\n.recorder select {\n  border: 1px solid #fa4d8c;\n}\n.recorder .frames {\n  display: flex;\n  max-width: 330px;\n}\n.recorder .frames.slim {\n  overflow-x: auto;\n  flex-wrap: nowrap;\n}\n.recorder .frames.phat {\n  flex-wrap: wrap;\n}\n.recorder .frame {\n  position: relative;\n  margin-right: 1px;\n}\n.recorder .frame img {\n  width: 50px;\n}\n.recorder .frame .tools {\n  position: absolute;\n  top: 0;\n  display: none;\n}\n.recorder .frame .tools button {\n  background: #000;\n  padding: 3px;\n  margin: 1px;\n  line-height: 1;\n}\n.recorder .frame:hover .tools {\n  display: block;\n}\n.image {\n  color: #83fa34;\n  padding-bottom: 2px;\n}\n.image input,\n.image select,\n.image textarea,\n.image button,\n.image a {\n  color: #83fa34;\n}\n.image button,\n.image select {\n  border: 1px solid #83fa34;\n}\n:disabled {\n  opacity: 0.75;\n}\ninput[type='range'] {\n  -webkit-appearance: none;\n  margin: 0;\n  height: 14px;\n  background: rgba(0, 0, 0, 0.3);\n}\ninput[type='range']:focus {\n  outline: none;\n}\ninput[type='range']::-webkit-slider-runnable-track {\n  width: 100%;\n  height: 14px;\n  cursor: pointer;\n  background: none;\n  border: 1px solid #fa8334;\n}\ninput[type='range']::-moz-range-track {\n  width: 100%;\n  height: 14px;\n  cursor: pointer;\n  background: none;\n  border: 1px solid #fa8334;\n}\ninput[type='range']::-webkit-slider-thumb {\n  height: 12px;\n  width: 9px;\n  background: #fa8334;\n  cursor: pointer;\n  -webkit-appearance: none;\n}\ninput[type='range']::-moz-range-thumb {\n  height: 12px;\n  width: 9px;\n  background: #fa8334;\n  cursor: pointer;\n  -webkit-appearance: none;\n}\ninput[type='range']:focus::-webkit-slider-runnable-track {\n  background: none;\n}\n.fx-ui {\n  color: #fa8334;\n}\n.fx-ui input,\n.fx-ui select,\n.fx-ui textarea,\n.fx-ui button,\n.fx-ui a {\n  color: #fa8334;\n}\n.fx-ui button,\n.fx-ui select {\n  border: 1px solid #fa8334;\n}\n.slider-and-input {\n  display: flex;\n}\n.slider-and-input input.slider {\n  flex: 4 auto;\n}\n.slider-and-input input.num {\n  flex: 1 auto;\n  border: none;\n  text-align: right;\n}\n.module-name {\n  flex: 0;\n  font-weight: bold;\n}\n.def-edit {\n  border: 1px dotted #fa8334;\n  padding: 3px;\n  margin: 3px 0;\n}\n.def-edit.disabled .params,\n.def-edit.disabled .module-name,\n.def-edit.disabled .prob-slider {\n  opacity: 0.7;\n}\n.def-kit .module-name {\n  padding-right: 5px;\n}\n.def-kit button {\n  width: 20px;\n  flex: 0;\n  background: none;\n  border: none;\n  padding: 0 5px;\n}\n.def-kit button:hover {\n  color: white !important;\n  cursor: pointer;\n}\n.module-selector select {\n  width: 100%;\n}\n.param-bool {\n  display: inline-block;\n}\n`,""]);const m=l},314:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var r="",n=void 0!==e[5];return e[4]&&(r+="@supports (".concat(e[4],") {")),e[2]&&(r+="@media ".concat(e[2]," {")),n&&(r+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),r+=t(e),n&&(r+="}"),e[2]&&(r+="}"),e[4]&&(r+="}"),r})).join("")},e.i=function(t,r,n,o,i){"string"==typeof t&&(t=[[null,t,void 0]]);var a={};if(n)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(a[c]=!0)}for(var u=0;u<t.length;u++){var f=[].concat(t[u]);n&&a[f[0]]||(void 0!==i&&(void 0===f[5]||(f[1]="@layer".concat(f[5].length>0?" ".concat(f[5]):""," {").concat(f[1],"}")),f[5]=i),r&&(f[2]?(f[1]="@media ".concat(f[2]," {").concat(f[1],"}"),f[2]=r):f[2]=r),o&&(f[4]?(f[1]="@supports (".concat(f[4],") {").concat(f[1],"}"),f[4]=o):f[4]="".concat(o)),e.push(f))}},e}},417:t=>{"use strict";t.exports=function(t,e){return e||(e={}),t?(t=String(t.__esModule?t.default:t),/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]|(%20)/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t):t}},601:t=>{"use strict";t.exports=function(t){return t[1]}},529:t=>{t.exports=function t(e,r,n){function o(a,s){if(!r[a]){if(!e[a]){if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=r[a]={exports:{}};e[a][0].call(u.exports,(function(t){return o(e[a][1][t]||t)}),u,u.exports,t,e,r,n)}return r[a].exports}for(var i=void 0,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(t,e,r){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function o(t){return"function"==typeof t}function i(t){return"object"==typeof t&&null!==t}function a(t){return void 0===t}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,r,n,s,c,u;if(this._events||(this._events={}),"error"===t&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var f=new Error('Uncaught, unspecified "error" event. ('+e+")");throw f.context=e,f}if(a(r=this._events[t]))return!1;if(o(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),r.apply(this,s)}else if(i(r))for(s=Array.prototype.slice.call(arguments,1),n=(u=r.slice()).length,c=0;c<n;c++)u[c].apply(this,s);return!0},n.prototype.addListener=function(t,e){var r;if(!o(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,o(e.listener)?e.listener:e),this._events[t]?i(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,i(this._events[t])&&!this._events[t].warned&&(r=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&r>0&&this._events[t].length>r&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){if(!o(e))throw TypeError("listener must be a function");var r=!1;function n(){this.removeListener(t,n),r||(r=!0,e.apply(this,arguments))}return n.listener=e,this.on(t,n),this},n.prototype.removeListener=function(t,e){var r,n,a,s;if(!o(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(a=(r=this._events[t]).length,n=-1,r===e||o(r.listener)&&r.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(i(r)){for(s=a;s-- >0;)if(r[s]===e||r[s].listener&&r[s].listener===e){n=s;break}if(n<0)return this;1===r.length?(r.length=0,delete this._events[t]):r.splice(n,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(o(r=this._events[t]))this.removeListener(t,r);else if(r)for(;r.length;)this.removeListener(t,r[r.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){return this._events&&this._events[t]?o(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(o(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},{}],2:[function(t,e,r){var n,o,i,a,s;s=navigator.userAgent.toLowerCase(),a=navigator.platform.toLowerCase(),i="ie"===(n=s.match(/(opera|ie|firefox|chrome|version)[\s\/:]([\w\d\.]+)?.*?(safari|version[\s\/:]([\w\d\.]+)|$)/)||[null,"unknown",0])[1]&&document.documentMode,(o={name:"version"===n[1]?n[3]:n[1],version:i||parseFloat("opera"===n[1]&&n[4]?n[4]:n[2]),platform:{name:s.match(/ip(?:ad|od|hone)/)?"ios":(s.match(/(?:webos|android)/)||a.match(/mac|win|linux/)||["other"])[0]}})[o.name]=!0,o[o.name+parseInt(o.version,10)]=!0,o.platform[o.platform.name]=!0,e.exports=o},{}],3:[function(t,e,r){var n,o,i,a={}.hasOwnProperty,s=[].indexOf||function(t){for(var e=0,r=this.length;e<r;e++)if(e in this&&this[e]===t)return e;return-1},c=[].slice;n=t("events").EventEmitter,i=t("./browser.coffee"),o=function(t){var e,r;function n(t){var r,n,o;for(n in this.running=!1,this.options={},this.frames=[],this.freeWorkers=[],this.activeWorkers=[],this.setOptions(t),e)o=e[n],null==(r=this.options)[n]&&(r[n]=o)}return function(t,e){for(var r in e)a.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(n,t),e={workerScript:"gif.worker.js",workers:2,repeat:0,background:"#fff",quality:10,width:null,height:null,transparent:null,debug:!1,dither:!1},r={delay:500,copy:!1},n.prototype.setOption=function(t,e){if(this.options[t]=e,null!=this._canvas&&("width"===t||"height"===t))return this._canvas[t]=e},n.prototype.setOptions=function(t){var e,r,n;for(e in r=[],t)a.call(t,e)&&(n=t[e],r.push(this.setOption(e,n)));return r},n.prototype.addFrame=function(t,e){var n,o;for(o in null==e&&(e={}),(n={}).transparent=this.options.transparent,r)n[o]=e[o]||r[o];if(null==this.options.width&&this.setOption("width",t.width),null==this.options.height&&this.setOption("height",t.height),"undefined"!=typeof ImageData&&null!==ImageData&&t instanceof ImageData)n.data=t.data;else if("undefined"!=typeof CanvasRenderingContext2D&&null!==CanvasRenderingContext2D&&t instanceof CanvasRenderingContext2D||"undefined"!=typeof WebGLRenderingContext&&null!==WebGLRenderingContext&&t instanceof WebGLRenderingContext)e.copy?n.data=this.getContextData(t):n.context=t;else{if(null==t.childNodes)throw new Error("Invalid image");e.copy?n.data=this.getImageData(t):n.image=t}return this.frames.push(n)},n.prototype.render=function(){var t,e,r;if(this.running)throw new Error("Already running");if(null==this.options.width||null==this.options.height)throw new Error("Width and height must be set prior to rendering");if(this.running=!0,this.nextFrame=0,this.finishedFrames=0,this.imageParts=function(){var t,e,r;for(r=[],t=0,e=this.frames.length;0<=e?t<e:t>e;0<=e?++t:--t)r.push(null);return r}.call(this),e=this.spawnWorkers(),!0===this.options.globalPalette)this.renderNextFrame();else for(t=0,r=e;0<=r?t<r:t>r;0<=r?++t:--t)this.renderNextFrame();return this.emit("start"),this.emit("progress",0)},n.prototype.abort=function(){for(var t;null!=(t=this.activeWorkers.shift());)this.log("killing active worker"),t.terminate();return this.running=!1,this.emit("abort")},n.prototype.spawnWorkers=function(){var t,e,r,n;return t=Math.min(this.options.workers,this.frames.length),function(){r=[];for(var n=e=this.freeWorkers.length;e<=t?n<t:n>t;e<=t?n++:n--)r.push(n);return r}.apply(this).forEach((n=this,function(t){var e;return n.log("spawning worker "+t),(e=new Worker(n.options.workerScript)).onmessage=function(t){return n.activeWorkers.splice(n.activeWorkers.indexOf(e),1),n.freeWorkers.push(e),n.frameFinished(t.data)},n.freeWorkers.push(e)})),t},n.prototype.frameFinished=function(t){var e,r;if(this.log("frame "+t.index+" finished - "+this.activeWorkers.length+" active"),this.finishedFrames++,this.emit("progress",this.finishedFrames/this.frames.length),this.imageParts[t.index]=t,!0===this.options.globalPalette&&(this.options.globalPalette=t.globalPalette,this.log("global palette analyzed"),this.frames.length>2))for(e=1,r=this.freeWorkers.length;1<=r?e<r:e>r;1<=r?++e:--e)this.renderNextFrame();return s.call(this.imageParts,null)>=0?this.renderNextFrame():this.finishRendering()},n.prototype.finishRendering=function(){var t,e,r,n,o,i,a,s,c,u,f,l,p,h,m,d;for(s=0,o=0,c=(h=this.imageParts).length;o<c;o++)s+=((e=h[o]).data.length-1)*e.pageSize+e.cursor;for(s+=e.pageSize-e.cursor,this.log("rendering finished - filesize "+Math.round(s/1e3)+"kb"),t=new Uint8Array(s),l=0,i=0,u=(m=this.imageParts).length;i<u;i++)for(r=a=0,f=(d=(e=m[i]).data).length;a<f;r=++a)p=d[r],t.set(p,l),r===e.data.length-1?l+=e.cursor:l+=e.pageSize;return n=new Blob([t],{type:"image/gif"}),this.emit("finished",n,t)},n.prototype.renderNextFrame=function(){var t,e,r;if(0===this.freeWorkers.length)throw new Error("No free workers");if(!(this.nextFrame>=this.frames.length))return t=this.frames[this.nextFrame++],r=this.freeWorkers.shift(),e=this.getTask(t),this.log("starting frame "+(e.index+1)+" of "+this.frames.length),this.activeWorkers.push(r),r.postMessage(e)},n.prototype.getContextData=function(t){return t.getImageData(0,0,this.options.width,this.options.height).data},n.prototype.getImageData=function(t){var e;return null==this._canvas&&(this._canvas=document.createElement("canvas"),this._canvas.width=this.options.width,this._canvas.height=this.options.height),(e=this._canvas.getContext("2d")).setFill=this.options.background,e.fillRect(0,0,this.options.width,this.options.height),e.drawImage(t,0,0),this.getContextData(e)},n.prototype.getTask=function(t){var e,r;if(r={index:e=this.frames.indexOf(t),last:e===this.frames.length-1,delay:t.delay,transparent:t.transparent,width:this.options.width,height:this.options.height,quality:this.options.quality,dither:this.options.dither,globalPalette:this.options.globalPalette,repeat:this.options.repeat,canTransfer:"chrome"===i.name},null!=t.data)r.data=t.data;else if(null!=t.context)r.data=this.getContextData(t.context);else{if(null==t.image)throw new Error("Invalid frame");r.data=this.getImageData(t.image)}return r},n.prototype.log=function(){var t;if(t=1<=arguments.length?c.call(arguments,0):[],this.options.debug)return console.log.apply(console,t)},n}(n),e.exports=o},{"./browser.coffee":2,events:1}]},{},[3])(3)},251:(t,e)=>{e.read=function(t,e,r,n,o){var i,a,s=8*o-n-1,c=(1<<s)-1,u=c>>1,f=-7,l=r?o-1:0,p=r?-1:1,h=t[e+l];for(l+=p,i=h&(1<<-f)-1,h>>=-f,f+=s;f>0;i=256*i+t[e+l],l+=p,f-=8);for(a=i&(1<<-f)-1,i>>=-f,f+=n;f>0;a=256*a+t[e+l],l+=p,f-=8);if(0===i)i=1-u;else{if(i===c)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,n),i-=u}return(h?-1:1)*a*Math.pow(2,i-n)},e.write=function(t,e,r,n,o,i){var a,s,c,u=8*i-o-1,f=(1<<u)-1,l=f>>1,p=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:i-1,m=n?1:-1,d=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=f):(a=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-a))<1&&(a--,c*=2),(e+=a+l>=1?p/c:p*Math.pow(2,1-l))*c>=2&&(a++,c/=2),a+l>=f?(s=0,a=f):a+l>=1?(s=(e*c-1)*Math.pow(2,o),a+=l):(s=e*Math.pow(2,l-1)*Math.pow(2,o),a=0));o>=8;t[r+h]=255&s,h+=m,s/=256,o-=8);for(a=a<<o|s,u+=o;u>0;t[r+h]=255&a,h+=m,a/=256,u-=8);t[r+h-m]|=128*d}},609:(t,e,r)=>{var n=r(521),o=r(877);t.exports={encode:n,decode:o}},877:(t,e,r)=>{var n=r(287).hp,o=function(){"use strict";var t=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),e=4017,r=799,n=3406,o=2276,i=1567,a=3784,s=5793,c=2896;function u(){}function f(t,e){for(var r,n,o=0,i=[],a=16;a>0&&!t[a-1];)a--;i.push({children:[],index:0});var s,c=i[0];for(r=0;r<a;r++){for(n=0;n<t[r];n++){for((c=i.pop()).children[c.index]=e[o];c.index>0;){if(0===i.length)throw new Error("Could not recreate Huffman Table");c=i.pop()}for(c.index++,i.push(c);i.length<=r;)i.push(s={children:[],index:0}),c.children[c.index]=s.children,c=s;o++}r+1<a&&(i.push(s={children:[],index:0}),c.children[c.index]=s.children,c=s)}return i[0].children}function l(e,r,n,o,i,a,s,c,u,f){n.precision,n.samplesPerLine,n.scanLines;var l=n.mcusPerLine,p=n.progressive,h=(n.maxH,n.maxV,r),m=0,d=0;function y(){if(d>0)return d--,m>>d&1;if(255==(m=e[r++])){var t=e[r++];if(t)throw new Error("unexpected marker: "+(m<<8|t).toString(16))}return d=7,m>>>7}function g(t){for(var e,r=t;null!==(e=y());){if("number"==typeof(r=r[e]))return r;if("object"!=typeof r)throw new Error("invalid huffman sequence")}return null}function v(t){for(var e=0;t>0;){var r=y();if(null===r)return;e=e<<1|r,t--}return e}function b(t){var e=v(t);return e>=1<<t-1?e:e+(-1<<t)+1}var w,O=0,x=0;function j(t,e,r,n,o){var i=r%l,a=(r/l|0)*t.v+n,s=i*t.h+o;void 0===t.blocks[a]&&f.tolerantDecoding||e(t,t.blocks[a][s])}function S(t,e,r){var n=r/t.blocksPerLine|0,o=r%t.blocksPerLine;void 0===t.blocks[n]&&f.tolerantDecoding||e(t,t.blocks[n][o])}var P,E,k,I,D,M,A=o.length;M=p?0===a?0===c?function(t,e){var r=g(t.huffmanTableDC),n=0===r?0:b(r)<<u;e[0]=t.pred+=n}:function(t,e){e[0]|=y()<<u}:0===c?function(e,r){if(O>0)O--;else for(var n=a,o=s;n<=o;){var i=g(e.huffmanTableAC),c=15&i,f=i>>4;if(0!==c)r[t[n+=f]]=b(c)*(1<<u),n++;else{if(f<15){O=v(f)+(1<<f)-1;break}n+=16}}}:function(e,r){for(var n=a,o=s,i=0;n<=o;){var c=t[n],f=r[c]<0?-1:1;switch(x){case 0:var l=g(e.huffmanTableAC),p=15&l;if(i=l>>4,0===p)i<15?(O=v(i)+(1<<i),x=4):(i=16,x=1);else{if(1!==p)throw new Error("invalid ACn encoding");w=b(p),x=i?2:3}continue;case 1:case 2:r[c]?r[c]+=(y()<<u)*f:0==--i&&(x=2==x?3:0);break;case 3:r[c]?r[c]+=(y()<<u)*f:(r[c]=w<<u,x=0);break;case 4:r[c]&&(r[c]+=(y()<<u)*f)}n++}4===x&&0==--O&&(x=0)}:function(e,r){var n=g(e.huffmanTableDC),o=0===n?0:b(n);r[0]=e.pred+=o;for(var i=1;i<64;){var a=g(e.huffmanTableAC),s=15&a,c=a>>4;if(0!==s)r[t[i+=c]]=b(s),i++;else{if(c<15)break;i+=16}}};var C,T,L,B,_=0;for(T=1==A?o[0].blocksPerLine*o[0].blocksPerColumn:l*n.mcusPerColumn,i||(i=T);_<T;){for(E=0;E<A;E++)o[E].pred=0;if(O=0,1==A)for(P=o[0],D=0;D<i;D++)S(P,M,_),_++;else for(D=0;D<i;D++){for(E=0;E<A;E++)for(L=(P=o[E]).h,B=P.v,k=0;k<B;k++)for(I=0;I<L;I++)j(P,M,_,k,I);if(++_===T)break}if(_===T)do{if(255===e[r]&&0!==e[r+1])break;r+=1}while(r<e.length-2);if(d=0,(C=e[r]<<8|e[r+1])<65280)throw new Error("marker was not found");if(!(C>=65488&&C<=65495))break;r+=2}return r-h}function p(t,u){var f,l,p=[],h=u.blocksPerLine,m=u.blocksPerColumn,d=h<<3,g=new Int32Array(64),v=new Uint8Array(64);function b(t,f,l){var p,h,m,d,y,g,v,b,w,O,x=u.quantizationTable,j=l;for(O=0;O<64;O++)j[O]=t[O]*x[O];for(O=0;O<8;++O){var S=8*O;0!=j[1+S]||0!=j[2+S]||0!=j[3+S]||0!=j[4+S]||0!=j[5+S]||0!=j[6+S]||0!=j[7+S]?(p=s*j[0+S]+128>>8,h=s*j[4+S]+128>>8,m=j[2+S],d=j[6+S],y=c*(j[1+S]-j[7+S])+128>>8,b=c*(j[1+S]+j[7+S])+128>>8,g=j[3+S]<<4,v=j[5+S]<<4,w=p-h+1>>1,p=p+h+1>>1,h=w,w=m*a+d*i+128>>8,m=m*i-d*a+128>>8,d=w,w=y-v+1>>1,y=y+v+1>>1,v=w,w=b+g+1>>1,g=b-g+1>>1,b=w,w=p-d+1>>1,p=p+d+1>>1,d=w,w=h-m+1>>1,h=h+m+1>>1,m=w,w=y*o+b*n+2048>>12,y=y*n-b*o+2048>>12,b=w,w=g*r+v*e+2048>>12,g=g*e-v*r+2048>>12,v=w,j[0+S]=p+b,j[7+S]=p-b,j[1+S]=h+v,j[6+S]=h-v,j[2+S]=m+g,j[5+S]=m-g,j[3+S]=d+y,j[4+S]=d-y):(w=s*j[0+S]+512>>10,j[0+S]=w,j[1+S]=w,j[2+S]=w,j[3+S]=w,j[4+S]=w,j[5+S]=w,j[6+S]=w,j[7+S]=w)}for(O=0;O<8;++O){var P=O;0!=j[8+P]||0!=j[16+P]||0!=j[24+P]||0!=j[32+P]||0!=j[40+P]||0!=j[48+P]||0!=j[56+P]?(p=s*j[0+P]+2048>>12,h=s*j[32+P]+2048>>12,m=j[16+P],d=j[48+P],y=c*(j[8+P]-j[56+P])+2048>>12,b=c*(j[8+P]+j[56+P])+2048>>12,g=j[24+P],v=j[40+P],w=p-h+1>>1,p=p+h+1>>1,h=w,w=m*a+d*i+2048>>12,m=m*i-d*a+2048>>12,d=w,w=y-v+1>>1,y=y+v+1>>1,v=w,w=b+g+1>>1,g=b-g+1>>1,b=w,w=p-d+1>>1,p=p+d+1>>1,d=w,w=h-m+1>>1,h=h+m+1>>1,m=w,w=y*o+b*n+2048>>12,y=y*n-b*o+2048>>12,b=w,w=g*r+v*e+2048>>12,g=g*e-v*r+2048>>12,v=w,j[0+P]=p+b,j[56+P]=p-b,j[8+P]=h+v,j[48+P]=h-v,j[16+P]=m+g,j[40+P]=m-g,j[24+P]=d+y,j[32+P]=d-y):(w=s*l[O+0]+8192>>14,j[0+P]=w,j[8+P]=w,j[16+P]=w,j[24+P]=w,j[32+P]=w,j[40+P]=w,j[48+P]=w,j[56+P]=w)}for(O=0;O<64;++O){var E=128+(j[O]+8>>4);f[O]=E<0?0:E>255?255:E}}y(d*m*8);for(var w=0;w<m;w++){var O=w<<3;for(f=0;f<8;f++)p.push(new Uint8Array(d));for(var x=0;x<h;x++){b(u.blocks[w][x],v,g);var j=0,S=x<<3;for(l=0;l<8;l++){var P=p[O+l];for(f=0;f<8;f++)P[S+f]=v[j++]}}}return p}function h(t){return t<0?0:t>255?255:t}u.prototype={load:function(t){var e=new XMLHttpRequest;e.open("GET",t,!0),e.responseType="arraybuffer",e.onload=function(){var t=new Uint8Array(e.response||e.mozResponseArrayBuffer);this.parse(t),this.onload&&this.onload()}.bind(this),e.send(null)},parse:function(e){var r=1e3*this.opts.maxResolutionInMP*1e3,n=0;function o(){var t=e[n]<<8|e[n+1];return n+=2,t}function i(t){var e,r,n=1,o=1;for(r in t.components)t.components.hasOwnProperty(r)&&(n<(e=t.components[r]).h&&(n=e.h),o<e.v&&(o=e.v));var i=Math.ceil(t.samplesPerLine/8/n),a=Math.ceil(t.scanLines/8/o);for(r in t.components)if(t.components.hasOwnProperty(r)){e=t.components[r];var s=Math.ceil(Math.ceil(t.samplesPerLine/8)*e.h/n),c=Math.ceil(Math.ceil(t.scanLines/8)*e.v/o),u=i*e.h,f=a*e.v,l=[];y(f*u*256);for(var p=0;p<f;p++){for(var h=[],m=0;m<u;m++)h.push(new Int32Array(64));l.push(h)}e.blocksPerLine=s,e.blocksPerColumn=c,e.blocks=l}t.maxH=n,t.maxV=o,t.mcusPerLine=i,t.mcusPerColumn=a}e.length;var a,s,c,u,h=null,m=null,d=[],g=[],v=[],b=[],w=o(),O=-1;if(this.comments=[],65496!=w)throw new Error("SOI not found");for(w=o();65497!=w;){switch(w){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var x=(c=void 0,u=void 0,c=o(),u=e.subarray(n,n+c-2),n+=u.length,u);if(65534===w){var j=String.fromCharCode.apply(null,x);this.comments.push(j)}65504===w&&74===x[0]&&70===x[1]&&73===x[2]&&70===x[3]&&0===x[4]&&(h={version:{major:x[5],minor:x[6]},densityUnits:x[7],xDensity:x[8]<<8|x[9],yDensity:x[10]<<8|x[11],thumbWidth:x[12],thumbHeight:x[13],thumbData:x.subarray(14,14+3*x[12]*x[13])}),65505===w&&69===x[0]&&120===x[1]&&105===x[2]&&102===x[3]&&0===x[4]&&(this.exifBuffer=x.subarray(5,x.length)),65518===w&&65===x[0]&&100===x[1]&&111===x[2]&&98===x[3]&&101===x[4]&&0===x[5]&&(m={version:x[6],flags0:x[7]<<8|x[8],flags1:x[9]<<8|x[10],transformCode:x[11]});break;case 65499:for(var S=o()+n-2;n<S;){var P=e[n++];y(256);var E=new Int32Array(64);if(P>>4){if(P>>4!=1)throw new Error("DQT: invalid table spec");for(H=0;H<64;H++)E[t[H]]=o()}else for(H=0;H<64;H++)E[t[H]]=e[n++];d[15&P]=E}break;case 65472:case 65473:case 65474:o(),(a={}).extended=65473===w,a.progressive=65474===w,a.precision=e[n++],a.scanLines=o(),a.samplesPerLine=o(),a.components={},a.componentsOrder=[];var k=a.scanLines*a.samplesPerLine;if(k>r){var I=Math.ceil((k-r)/1e6);throw new Error(`maxResolutionInMP limit exceeded by ${I}MP`)}var D,M=e[n++];for(Y=0;Y<M;Y++){D=e[n];var A=e[n+1]>>4,C=15&e[n+1],T=e[n+2];if(A<=0||C<=0)throw new Error("Invalid sampling factor, expected values above 0");a.componentsOrder.push(D),a.components[D]={h:A,v:C,quantizationIdx:T},n+=3}i(a),g.push(a);break;case 65476:var L=o();for(Y=2;Y<L;){var B=e[n++],_=new Uint8Array(16),U=0;for(H=0;H<16;H++,n++)U+=_[H]=e[n];y(16+U);var R=new Uint8Array(U);for(H=0;H<U;H++,n++)R[H]=e[n];Y+=17+U,(B>>4?v:b)[15&B]=f(_,R)}break;case 65501:o(),s=o();break;case 65500:o(),o();break;case 65498:o();var N=e[n++],F=[];for(Y=0;Y<N;Y++){V=a.components[e[n++]];var z=e[n++];V.huffmanTableDC=b[z>>4],V.huffmanTableAC=v[15&z],F.push(V)}var $=e[n++],X=e[n++],q=e[n++],G=l(e,n,a,F,s,$,X,q>>4,15&q,this.opts);n+=G;break;case 65535:255!==e[n]&&n--;break;default:if(255==e[n-3]&&e[n-2]>=192&&e[n-2]<=254){n-=3;break}if(224===w||225==w){if(-1!==O)throw new Error(`first unknown JPEG marker at offset ${O.toString(16)}, second unknown JPEG marker ${w.toString(16)} at offset ${(n-1).toString(16)}`);O=n-1;const t=o();if(255===e[n+t-2]){n+=t-2;break}}throw new Error("unknown JPEG marker "+w.toString(16))}w=o()}if(1!=g.length)throw new Error("only single frame JPEGs supported");for(var Y=0;Y<g.length;Y++){var W=g[Y].components;for(var H in W)W[H].quantizationTable=d[W[H].quantizationIdx],delete W[H].quantizationIdx}for(this.width=a.samplesPerLine,this.height=a.scanLines,this.jfif=h,this.adobe=m,this.components=[],Y=0;Y<a.componentsOrder.length;Y++){var V=a.components[a.componentsOrder[Y]];this.components.push({lines:p(0,V),scaleX:V.h/a.maxH,scaleY:V.v/a.maxV})}},getData:function(t,e){var r,n,o,i,a,s,c,u,f,l,p,m,d,g,v,b,w,O,x,j,S,P=this.width/t,E=this.height/e,k=0,I=t*e*this.components.length;y(I);var D=new Uint8Array(I);switch(this.components.length){case 1:for(r=this.components[0],l=0;l<e;l++)for(a=r.lines[0|l*r.scaleY*E],f=0;f<t;f++)p=a[0|f*r.scaleX*P],D[k++]=p;break;case 2:for(r=this.components[0],n=this.components[1],l=0;l<e;l++)for(a=r.lines[0|l*r.scaleY*E],s=n.lines[0|l*n.scaleY*E],f=0;f<t;f++)p=a[0|f*r.scaleX*P],D[k++]=p,p=s[0|f*n.scaleX*P],D[k++]=p;break;case 3:for(S=!0,this.adobe&&this.adobe.transformCode?S=!0:void 0!==this.opts.colorTransform&&(S=!!this.opts.colorTransform),r=this.components[0],n=this.components[1],o=this.components[2],l=0;l<e;l++)for(a=r.lines[0|l*r.scaleY*E],s=n.lines[0|l*n.scaleY*E],c=o.lines[0|l*o.scaleY*E],f=0;f<t;f++)S?(p=a[0|f*r.scaleX*P],m=s[0|f*n.scaleX*P],O=h(p+1.402*((d=c[0|f*o.scaleX*P])-128)),x=h(p-.3441363*(m-128)-.71413636*(d-128)),j=h(p+1.772*(m-128))):(O=a[0|f*r.scaleX*P],x=s[0|f*n.scaleX*P],j=c[0|f*o.scaleX*P]),D[k++]=O,D[k++]=x,D[k++]=j;break;case 4:if(!this.adobe)throw new Error("Unsupported color mode (4 components)");for(S=!1,this.adobe&&this.adobe.transformCode?S=!0:void 0!==this.opts.colorTransform&&(S=!!this.opts.colorTransform),r=this.components[0],n=this.components[1],o=this.components[2],i=this.components[3],l=0;l<e;l++)for(a=r.lines[0|l*r.scaleY*E],s=n.lines[0|l*n.scaleY*E],c=o.lines[0|l*o.scaleY*E],u=i.lines[0|l*i.scaleY*E],f=0;f<t;f++)S?(p=a[0|f*r.scaleX*P],m=s[0|f*n.scaleX*P],d=c[0|f*o.scaleX*P],g=u[0|f*i.scaleX*P],v=255-h(p+1.402*(d-128)),b=255-h(p-.3441363*(m-128)-.71413636*(d-128)),w=255-h(p+1.772*(m-128))):(v=a[0|f*r.scaleX*P],b=s[0|f*n.scaleX*P],w=c[0|f*o.scaleX*P],g=u[0|f*i.scaleX*P]),D[k++]=255-v,D[k++]=255-b,D[k++]=255-w,D[k++]=255-g;break;default:throw new Error("Unsupported color mode")}return D},copyToImageData:function(t,e){var r,n,o,i,a,s,c,u,f,l=t.width,p=t.height,m=t.data,d=this.getData(l,p),y=0,g=0;switch(this.components.length){case 1:for(n=0;n<p;n++)for(r=0;r<l;r++)o=d[y++],m[g++]=o,m[g++]=o,m[g++]=o,e&&(m[g++]=255);break;case 3:for(n=0;n<p;n++)for(r=0;r<l;r++)c=d[y++],u=d[y++],f=d[y++],m[g++]=c,m[g++]=u,m[g++]=f,e&&(m[g++]=255);break;case 4:for(n=0;n<p;n++)for(r=0;r<l;r++)a=d[y++],s=d[y++],o=d[y++],c=255-h(a*(1-(i=d[y++])/255)+i),u=255-h(s*(1-i/255)+i),f=255-h(o*(1-i/255)+i),m[g++]=c,m[g++]=u,m[g++]=f,e&&(m[g++]=255);break;default:throw new Error("Unsupported color mode")}}};var m=0,d=0;function y(t=0){var e=m+t;if(e>d){var r=Math.ceil((e-d)/1024/1024);throw new Error(`maxMemoryUsageInMB limit exceeded by at least ${r}MB`)}m=e}return u.resetMaxMemoryUsage=function(t){m=0,d=t},u.getBytesAllocated=function(){return m},u.requestMemoryAllocation=y,u}();t.exports=function(t,e={}){var r={colorTransform:void 0,useTArray:!1,formatAsRGBA:!0,tolerantDecoding:!0,maxResolutionInMP:100,maxMemoryUsageInMB:512,...e},i=new Uint8Array(t),a=new o;a.opts=r,o.resetMaxMemoryUsage(1024*r.maxMemoryUsageInMB*1024),a.parse(i);var s=r.formatAsRGBA?4:3,c=a.width*a.height*s;try{o.requestMemoryAllocation(c);var u={width:a.width,height:a.height,exifBuffer:a.exifBuffer,data:r.useTArray?new Uint8Array(c):n.alloc(c)};a.comments.length>0&&(u.comments=a.comments)}catch(t){if(t instanceof RangeError)throw new Error("Could not allocate enough memory for the image. Required: "+c);if(t instanceof ReferenceError&&"Buffer is not defined"===t.message)throw new Error("Buffer is not globally defined in this environment. Consider setting useTArray to true");throw t}return a.copyToImageData(u,r.formatAsRGBA),u}},521:(t,e,r)=>{var n=r(287).hp;function o(t){Math.round;var e,r,o,i,a,s=Math.floor,c=new Array(64),u=new Array(64),f=new Array(64),l=new Array(64),p=new Array(65535),h=new Array(65535),m=new Array(64),d=new Array(64),y=[],g=0,v=7,b=new Array(64),w=new Array(64),O=new Array(64),x=new Array(256),j=new Array(2048),S=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],P=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],E=[0,1,2,3,4,5,6,7,8,9,10,11],k=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],I=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],D=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],M=[0,1,2,3,4,5,6,7,8,9,10,11],A=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],C=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function T(t,e){for(var r=0,n=0,o=new Array,i=1;i<=16;i++){for(var a=1;a<=t[i];a++)o[e[n]]=[],o[e[n]][0]=r,o[e[n]][1]=i,n++,r++;r*=2}return o}function L(t){for(var e=t[0],r=t[1]-1;r>=0;)e&1<<r&&(g|=1<<v),r--,--v<0&&(255==g?(B(255),B(0)):B(g),v=7,g=0)}function B(t){y.push(t)}function _(t){B(t>>8&255),B(255&t)}function U(t,e,r,n,o){for(var i,a=o[0],s=o[240],c=function(t,e){var r,n,o,i,a,s,c,u,f,l,p=0;for(f=0;f<8;++f){r=t[p],n=t[p+1],o=t[p+2],i=t[p+3],a=t[p+4],s=t[p+5],c=t[p+6];var h=r+(u=t[p+7]),d=r-u,y=n+c,g=n-c,v=o+s,b=o-s,w=i+a,O=i-a,x=h+w,j=h-w,S=y+v,P=y-v;t[p]=x+S,t[p+4]=x-S;var E=.707106781*(P+j);t[p+2]=j+E,t[p+6]=j-E;var k=.382683433*((x=O+b)-(P=g+d)),I=.5411961*x+k,D=1.306562965*P+k,M=.707106781*(S=b+g),A=d+M,C=d-M;t[p+5]=C+I,t[p+3]=C-I,t[p+1]=A+D,t[p+7]=A-D,p+=8}for(p=0,f=0;f<8;++f){r=t[p],n=t[p+8],o=t[p+16],i=t[p+24],a=t[p+32],s=t[p+40],c=t[p+48];var T=r+(u=t[p+56]),L=r-u,B=n+c,_=n-c,U=o+s,R=o-s,N=i+a,F=i-a,z=T+N,$=T-N,X=B+U,q=B-U;t[p]=z+X,t[p+32]=z-X;var G=.707106781*(q+$);t[p+16]=$+G,t[p+48]=$-G;var Y=.382683433*((z=F+R)-(q=_+L)),W=.5411961*z+Y,H=1.306562965*q+Y,V=.707106781*(X=R+_),J=L+V,K=L-V;t[p+40]=K+W,t[p+24]=K-W,t[p+8]=J+H,t[p+56]=J-H,p++}for(f=0;f<64;++f)l=t[f]*e[f],m[f]=l>0?l+.5|0:l-.5|0;return m}(t,e),u=0;u<64;++u)d[S[u]]=c[u];var f=d[0]-r;r=d[0],0==f?L(n[0]):(L(n[h[i=32767+f]]),L(p[i]));for(var l=63;l>0&&0==d[l];l--);if(0==l)return L(a),r;for(var y,g=1;g<=l;){for(var v=g;0==d[g]&&g<=l;++g);var b=g-v;if(b>=16){y=b>>4;for(var w=1;w<=y;++w)L(s);b&=15}i=32767+d[g],L(o[(b<<4)+h[i]]),L(p[i]),g++}return 63!=l&&L(a),r}function R(t){t<=0&&(t=1),t>100&&(t=100),a!=t&&(function(t){for(var e=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],r=0;r<64;r++){var n=s((e[r]*t+50)/100);n<1?n=1:n>255&&(n=255),c[S[r]]=n}for(var o=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],i=0;i<64;i++){var a=s((o[i]*t+50)/100);a<1?a=1:a>255&&(a=255),u[S[i]]=a}for(var p=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],h=0,m=0;m<8;m++)for(var d=0;d<8;d++)f[h]=1/(c[S[h]]*p[m]*p[d]*8),l[h]=1/(u[S[h]]*p[m]*p[d]*8),h++}(t<50?Math.floor(5e3/t):Math.floor(200-2*t)),a=t)}this.encode=function(t,a){var s;(new Date).getTime(),a&&R(a),y=new Array,g=0,v=7,_(65496),_(65504),_(16),B(74),B(70),B(73),B(70),B(0),B(1),B(1),B(0),_(1),_(1),B(0),B(0),void 0!==(s=t.comments)&&s.constructor===Array&&s.forEach((t=>{if("string"==typeof t){_(65534);var e,r=t.length;for(_(r+2),e=0;e<r;e++)B(t.charCodeAt(e))}})),function(t){if(t){_(65505),69===t[0]&&120===t[1]&&105===t[2]&&102===t[3]?_(t.length+2):(_(t.length+5+2),B(69),B(120),B(105),B(102),B(0));for(var e=0;e<t.length;e++)B(t[e])}}(t.exifBuffer),function(){_(65499),_(132),B(0);for(var t=0;t<64;t++)B(c[t]);B(1);for(var e=0;e<64;e++)B(u[e])}(),function(t,e){_(65472),_(17),B(8),_(e),_(t),B(3),B(1),B(17),B(0),B(2),B(17),B(1),B(3),B(17),B(1)}(t.width,t.height),function(){_(65476),_(418),B(0);for(var t=0;t<16;t++)B(P[t+1]);for(var e=0;e<=11;e++)B(E[e]);B(16);for(var r=0;r<16;r++)B(k[r+1]);for(var n=0;n<=161;n++)B(I[n]);B(1);for(var o=0;o<16;o++)B(D[o+1]);for(var i=0;i<=11;i++)B(M[i]);B(17);for(var a=0;a<16;a++)B(A[a+1]);for(var s=0;s<=161;s++)B(C[s])}(),_(65498),_(12),B(3),B(1),B(0),B(2),B(17),B(3),B(17),B(0),B(63),B(0);var p=0,h=0,m=0;g=0,v=7,this.encode.displayName="_encode_";for(var d,x,S,T,N,F,z,$,X,q=t.data,G=t.width,Y=t.height,W=4*G,H=0;H<Y;){for(d=0;d<W;){for(F=N=W*H+d,z=-1,$=0,X=0;X<64;X++)F=N+($=X>>3)*W+(z=4*(7&X)),H+$>=Y&&(F-=W*(H+1+$-Y)),d+z>=W&&(F-=d+z-W+4),x=q[F++],S=q[F++],T=q[F++],b[X]=(j[x]+j[S+256|0]+j[T+512|0]>>16)-128,w[X]=(j[x+768|0]+j[S+1024|0]+j[T+1280|0]>>16)-128,O[X]=(j[x+1280|0]+j[S+1536|0]+j[T+1792|0]>>16)-128;p=U(b,f,p,e,o),h=U(w,l,h,r,i),m=U(O,l,m,r,i),d+=32}H+=8}if(v>=0){var V=[];V[1]=v+1,V[0]=(1<<v+1)-1,L(V)}return _(65497),n.from(y)},(new Date).getTime(),t||(t=50),function(){for(var t=String.fromCharCode,e=0;e<256;e++)x[e]=t(e)}(),e=T(P,E),r=T(D,M),o=T(k,I),i=T(A,C),function(){for(var t=1,e=2,r=1;r<=15;r++){for(var n=t;n<e;n++)h[32767+n]=r,p[32767+n]=[],p[32767+n][1]=r,p[32767+n][0]=n;for(var o=-(e-1);o<=-t;o++)h[32767+o]=r,p[32767+o]=[],p[32767+o][1]=r,p[32767+o][0]=e-1+o;t<<=1,e<<=1}}(),function(){for(var t=0;t<256;t++)j[t]=19595*t,j[t+256|0]=38470*t,j[t+512|0]=7471*t+32768,j[t+768|0]=-11059*t,j[t+1024|0]=-21709*t,j[t+1280|0]=32768*t+8421375,j[t+1536|0]=-27439*t,j[t+1792|0]=-5329*t}(),R(t),(new Date).getTime()}t.exports=function(t,e){return void 0===e&&(e=50),{data:new o(e).encode(t,e),width:t.width,height:t.height}}},674:(t,e,r)=>{"use strict";var n=r(165);t.exports=function(t,e,r){var o=[],i=!1,a=-1;function s(){for(a=0;a<o.length;a+=2)try{t(o[a],n(o[a+1]),c)}catch(t){r.error(t)}a=-1}function c(){i||(i=!0,e((function(){i=!1,s()})))}return c.sync=s,{mount:function(e,r){if(null!=r&&null==r.view&&"function"!=typeof r)throw new TypeError("m.mount expects a component, not a vnode.");var i=o.indexOf(e);i>=0&&(o.splice(i,2),i<=a&&(a-=2),t(e,[])),null!=r&&(o.push(e,r),t(e,n(r),c))},redraw:c}}},804:(t,e,r)=>{"use strict";var n=r(165),o=r(726),i=r(921),a=r(555),s=r(462),c=r(500),u=r(910),f=r(333),l={};function p(t){try{return decodeURIComponent(t)}catch(e){return t}}t.exports=function(t,e){var r,h,m,d,y,g,v=null==t?null:"function"==typeof t.setImmediate?t.setImmediate:t.setTimeout,b=i.resolve(),w=!1,O=!1,x=0,j=l,S={onbeforeupdate:function(){return!(!(x=x?2:1)||l===j)},onremove:function(){t.removeEventListener("popstate",k,!1),t.removeEventListener("hashchange",E,!1)},view:function(){if(x&&l!==j){var t=[n(m,d.key,d)];return j&&(t=j.render(t[0])),t}}},P=D.SKIP={};function E(){w=!1;var n=t.location.hash;"#"!==D.prefix[0]&&(n=t.location.search+n,"?"!==D.prefix[0]&&"/"!==(n=t.location.pathname+n)[0]&&(n="/"+n));var o=n.concat().replace(/(?:%[a-f89][a-f0-9])+/gim,p).slice(D.prefix.length),i=s(o);function a(t){console.error(t),I(h,null,{replace:!0})}u(i.params,t.history.state),function t(n){for(;n<r.length;n++)if(r[n].check(i)){var s=r[n].component,c=r[n].route,u=s,f=g=function(r){if(f===g){if(r===P)return t(n+1);m=null==r||"function"!=typeof r.view&&"function"!=typeof r?"div":r,d=i.params,y=o,g=null,j=s.render?s:null,2===x?e.redraw():(x=2,e.redraw.sync())}};return void(s.view||"function"==typeof s?(s={},f(u)):s.onmatch?b.then((function(){return s.onmatch(i.params,o,c)})).then(f,o===h?null:a):f("div"))}if(o===h)throw new Error("Could not resolve default route "+h+".");I(h,null,{replace:!0})}(0)}function k(){w||(w=!0,v(E))}function I(e,r,n){if(e=a(e,r),O){k();var o=n?n.state:null,i=n?n.title:null;n&&n.replace?t.history.replaceState(o,i,D.prefix+e):t.history.pushState(o,i,D.prefix+e)}else t.location.href=D.prefix+e}function D(n,o,i){if(!n)throw new TypeError("DOM element being rendered to does not exist.");if(r=Object.keys(i).map((function(t){if("/"!==t[0])throw new SyntaxError("Routes must start with a '/'.");if(/:([^\/\.-]+)(\.{3})?:/.test(t))throw new SyntaxError("Route parameter names must be separated with either '/', '.', or '-'.");return{route:t,component:i[t],check:c(t)}})),h=o,null!=o){var a=s(o);if(!r.some((function(t){return t.check(a)})))throw new ReferenceError("Default route doesn't match any known routes.")}"function"==typeof t.history.pushState?t.addEventListener("popstate",k,!1):"#"===D.prefix[0]&&t.addEventListener("hashchange",E,!1),O=!0,e.mount(n,S),E()}return D.set=function(t,e,r){null!=g&&((r=r||{}).replace=!0),g=null,I(t,e,r)},D.get=function(){return y},D.prefix="#!",D.Link={view:function(t){var e,r,n,i=o(t.attrs.selector||"a",f(t.attrs,["options","params","selector","onclick"]),t.children);return(i.attrs.disabled=Boolean(i.attrs.disabled))?(i.attrs.href=null,i.attrs["aria-disabled"]="true"):(e=t.attrs.options,r=t.attrs.onclick,n=a(i.attrs.href,t.attrs.params),i.attrs.href=D.prefix+n,i.attrs.onclick=function(t){var o;"function"==typeof r?o=r.call(t.currentTarget,t):null==r||"object"!=typeof r||"function"==typeof r.handleEvent&&r.handleEvent(t),!1===o||t.defaultPrevented||0!==t.button&&0!==t.which&&1!==t.which||t.currentTarget.target&&"_self"!==t.currentTarget.target||t.ctrlKey||t.metaKey||t.shiftKey||t.altKey||(t.preventDefault(),t.redraw=!1,D.set(n,null,e))}),i}},D.param=function(t){return d&&null!=t?d[t]:d},D}},419:(t,e,r)=>{"use strict";var n=r(726);n.trust=r(665),n.fragment=r(995),t.exports=n},862:(t,e,r)=>{"use strict";var n=r(419),o=r(975),i=r(199),a=function(){return n.apply(this,arguments)};a.m=n,a.trust=n.trust,a.fragment=n.fragment,a.Fragment="[",a.mount=i.mount,a.route=r(843),a.render=r(88),a.redraw=i.redraw,a.request=o.request,a.jsonp=o.jsonp,a.parseQueryString=r(755),a.buildQueryString=r(224),a.parsePathname=r(462),a.buildPathname=r(555),a.vnode=r(165),a.PromisePolyfill=r(141),a.censor=r(333),t.exports=a},199:(t,e,r)=>{"use strict";var n=r(88);t.exports=r(674)(n,"undefined"!=typeof requestAnimationFrame?requestAnimationFrame:null,"undefined"!=typeof console?console:null)},555:(t,e,r)=>{"use strict";var n=r(224),o=r(910);t.exports=function(t,e){if(/:([^\/\.-]+)(\.{3})?:/.test(t))throw new SyntaxError("Template parameter names must be separated by either a '/', '-', or '.'.");if(null==e)return t;var r=t.indexOf("?"),i=t.indexOf("#"),a=i<0?t.length:i,s=r<0?a:r,c=t.slice(0,s),u={};o(u,e);var f=c.replace(/:([^\/\.-]+)(\.{3})?/g,(function(t,r,n){return delete u[r],null==e[r]?t:n?e[r]:encodeURIComponent(String(e[r]))})),l=f.indexOf("?"),p=f.indexOf("#"),h=p<0?f.length:p,m=l<0?h:l,d=f.slice(0,m);r>=0&&(d+=t.slice(r,a)),l>=0&&(d+=(r<0?"?":"&")+f.slice(l,h));var y=n(u);return y&&(d+=(r<0&&l<0?"?":"&")+y),i>=0&&(d+=t.slice(i)),p>=0&&(d+=(i<0?"":"&")+f.slice(p)),d}},500:(t,e,r)=>{"use strict";var n=r(462);t.exports=function(t){var e=n(t),r=Object.keys(e.params),o=[],i=new RegExp("^"+e.path.replace(/:([^\/.-]+)(\.{3}|\.(?!\.)|-)?|[\\^$*+.()|\[\]{}]/g,(function(t,e,r){return null==e?"\\"+t:(o.push({k:e,r:"..."===r}),"..."===r?"(.*)":"."===r?"([^/]+)\\.":"([^/]+)"+(r||""))}))+"$");return function(t){for(var n=0;n<r.length;n++)if(e.params[r[n]]!==t.params[r[n]])return!1;if(!o.length)return i.test(t.path);var a=i.exec(t.path);if(null==a)return!1;for(n=0;n<o.length;n++)t.params[o[n].k]=o[n].r?a[n+1]:decodeURIComponent(a[n+1]);return!0}}},462:(t,e,r)=>{"use strict";var n=r(755);t.exports=function(t){var e=t.indexOf("?"),r=t.indexOf("#"),o=r<0?t.length:r,i=e<0?o:e,a=t.slice(0,i).replace(/\/{2,}/g,"/");return a?("/"!==a[0]&&(a="/"+a),a.length>1&&"/"===a[a.length-1]&&(a=a.slice(0,-1))):a="/",{path:a,params:e<0?{}:n(t.slice(e+1,o))}}},141:t=>{"use strict";var e=function(t){if(!(this instanceof e))throw new Error("Promise must be called with 'new'.");if("function"!=typeof t)throw new TypeError("executor must be a function.");var r=this,n=[],o=[],i=u(n,!0),a=u(o,!1),s=r._instance={resolvers:n,rejectors:o},c="function"==typeof setImmediate?setImmediate:setTimeout;function u(t,e){return function i(u){var l;try{if(!e||null==u||"object"!=typeof u&&"function"!=typeof u||"function"!=typeof(l=u.then))c((function(){e||0!==t.length||console.error("Possible unhandled promise rejection:",u);for(var r=0;r<t.length;r++)t[r](u);n.length=0,o.length=0,s.state=e,s.retry=function(){i(u)}}));else{if(u===r)throw new TypeError("Promise can't be resolved with itself.");f(l.bind(u))}}catch(t){a(t)}}}function f(t){var e=0;function r(t){return function(r){e++>0||t(r)}}var n=r(a);try{t(r(i),n)}catch(t){n(t)}}f(t)};e.prototype.then=function(t,r){var n,o,i=this._instance;function a(t,e,r,a){e.push((function(e){if("function"!=typeof t)r(e);else try{n(t(e))}catch(t){o&&o(t)}})),"function"==typeof i.retry&&a===i.state&&i.retry()}var s=new e((function(t,e){n=t,o=e}));return a(t,i.resolvers,n,!0),a(r,i.rejectors,o,!1),s},e.prototype.catch=function(t){return this.then(null,t)},e.prototype.finally=function(t){return this.then((function(r){return e.resolve(t()).then((function(){return r}))}),(function(r){return e.resolve(t()).then((function(){return e.reject(r)}))}))},e.resolve=function(t){return t instanceof e?t:new e((function(e){e(t)}))},e.reject=function(t){return new e((function(e,r){r(t)}))},e.all=function(t){return new e((function(e,r){var n=t.length,o=0,i=[];if(0===t.length)e([]);else for(var a=0;a<t.length;a++)!function(a){function s(t){o++,i[a]=t,o===n&&e(i)}null==t[a]||"object"!=typeof t[a]&&"function"!=typeof t[a]||"function"!=typeof t[a].then?s(t[a]):t[a].then(s,r)}(a)}))},e.race=function(t){return new e((function(e,r){for(var n=0;n<t.length;n++)t[n].then(e,r)}))},t.exports=e},921:(t,e,r)=>{"use strict";var n=r(141);"undefined"!=typeof window?(void 0===window.Promise?window.Promise=n:window.Promise.prototype.finally||(window.Promise.prototype.finally=n.prototype.finally),t.exports=window.Promise):void 0!==r.g?(void 0===r.g.Promise?r.g.Promise=n:r.g.Promise.prototype.finally||(r.g.Promise.prototype.finally=n.prototype.finally),t.exports=r.g.Promise):t.exports=n},224:t=>{"use strict";t.exports=function(t){if("[object Object]"!==Object.prototype.toString.call(t))return"";var e=[];for(var r in t)n(r,t[r]);return e.join("&");function n(t,r){if(Array.isArray(r))for(var o=0;o<r.length;o++)n(t+"["+o+"]",r[o]);else if("[object Object]"===Object.prototype.toString.call(r))for(var o in r)n(t+"["+o+"]",r[o]);else e.push(encodeURIComponent(t)+(null!=r&&""!==r?"="+encodeURIComponent(r):""))}}},755:t=>{"use strict";function e(t){try{return decodeURIComponent(t)}catch(e){return t}}t.exports=function(t){if(""===t||null==t)return{};"?"===t.charAt(0)&&(t=t.slice(1));for(var r=t.split("&"),n={},o={},i=0;i<r.length;i++){var a=r[i].split("="),s=e(a[0]),c=2===a.length?e(a[1]):"";"true"===c?c=!0:"false"===c&&(c=!1);var u=s.split(/\]\[?|\[/),f=o;s.indexOf("[")>-1&&u.pop();for(var l=0;l<u.length;l++){var p=u[l],h=u[l+1],m=""==h||!isNaN(parseInt(h,10));if(""===p)null==n[s=u.slice(0,l).join()]&&(n[s]=Array.isArray(f)?f.length:0),p=n[s]++;else if("__proto__"===p)break;if(l===u.length-1)f[p]=c;else{var d=Object.getOwnPropertyDescriptor(f,p);null!=d&&(d=d.value),null==d&&(f[p]=d=m?[]:{}),f=d}}}return o}},88:(t,e,r)=>{"use strict";t.exports=r(147)("undefined"!=typeof window?window:null)},995:(t,e,r)=>{"use strict";var n=r(165),o=r(178);t.exports=function(){var t=o.apply(0,arguments);return t.tag="[",t.children=n.normalizeChildren(t.children),t}},726:(t,e,r)=>{"use strict";var n=r(165),o=r(178),i=r(795),a=/(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s*=\s*("|'|)((?:\\["'\]]|.)*?)\5)?\])/g,s={};function c(t){for(var e in t)if(i.call(t,e))return!1;return!0}t.exports=function(t){if(null==t||"string"!=typeof t&&"function"!=typeof t&&"function"!=typeof t.view)throw Error("The selector must be either a string or a component.");var e=o.apply(1,arguments);return"string"==typeof t&&(e.children=n.normalizeChildren(e.children),"["!==t)?function(t,e){var r=e.attrs,n=i.call(r,"class"),o=n?r.class:r.className;if(e.tag=t.tag,e.attrs={},!c(t.attrs)&&!c(r)){var a={};for(var s in r)i.call(r,s)&&(a[s]=r[s]);r=a}for(var s in t.attrs)i.call(t.attrs,s)&&"className"!==s&&!i.call(r,s)&&(r[s]=t.attrs[s]);for(var s in null==o&&null==t.attrs.className||(r.className=null!=o?null!=t.attrs.className?String(t.attrs.className)+" "+String(o):o:null!=t.attrs.className?t.attrs.className:null),n&&(r.class=null),r)if(i.call(r,s)&&"key"!==s){e.attrs=r;break}return e}(s[t]||function(t){for(var e,r="div",n=[],o={};e=a.exec(t);){var i=e[1],c=e[2];if(""===i&&""!==c)r=c;else if("#"===i)o.id=c;else if("."===i)n.push(c);else if("["===e[3][0]){var u=e[6];u&&(u=u.replace(/\\(["'])/g,"$1").replace(/\\\\/g,"\\")),"class"===e[4]?n.push(u):o[e[4]]=""===u?u:u||!0}}return n.length>0&&(o.className=n.join(" ")),s[t]={tag:r,attrs:o}}(t),e):(e.tag=t,e)}},178:(t,e,r)=>{"use strict";var n=r(165);t.exports=function(){var t,e=arguments[this],r=this+1;if(null==e?e={}:("object"!=typeof e||null!=e.tag||Array.isArray(e))&&(e={},r=this),arguments.length===r+1)t=arguments[r],Array.isArray(t)||(t=[t]);else for(t=[];r<arguments.length;)t.push(arguments[r++]);return n("",e.key,e,t)}},147:(t,e,r)=>{"use strict";var n=r(165);t.exports=function(t){var e,r=t&&t.document,o={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"};function i(t){return t.attrs&&t.attrs.xmlns||o[t.tag]}function a(t,e){if(t.state!==e)throw new Error("'vnode.state' must not be modified.")}function s(t){var e=t.state;try{return this.apply(e,arguments)}finally{a(t,e)}}function c(){try{return r.activeElement}catch(t){return null}}function u(t,e,r,n,o,i,a){for(var s=r;s<n;s++){var c=e[s];null!=c&&f(t,c,o,a,i)}}function f(t,e,o,a,c){var l=e.tag;if("string"==typeof l)switch(e.state={},null!=e.attrs&&R(e.attrs,e,o),l){case"#":!function(t,e,n){e.dom=r.createTextNode(e.children),w(t,e.dom,n)}(t,e,c);break;case"<":p(t,e,a,c);break;case"[":!function(t,e,n,o,i){var a=r.createDocumentFragment();if(null!=e.children){var s=e.children;u(a,s,0,s.length,n,null,o)}e.dom=a.firstChild,e.domSize=a.childNodes.length,w(t,a,i)}(t,e,o,a,c);break;default:!function(t,e,n,o,a){var s=e.tag,c=e.attrs,f=c&&c.is,l=(o=i(e)||o)?f?r.createElementNS(o,s,{is:f}):r.createElementNS(o,s):f?r.createElement(s,{is:f}):r.createElement(s);if(e.dom=l,null!=c&&function(t,e,r){"input"===t.tag&&null!=e.type&&t.dom.setAttribute("type",e.type);var n=null!=e&&"input"===t.tag&&"file"===e.type;for(var o in e)k(t,o,null,e[o],r,n)}(e,c,o),w(t,l,a),!O(e)&&null!=e.children){var p=e.children;u(l,p,0,p.length,n,null,o),"select"===e.tag&&null!=c&&function(t,e){if("value"in e)if(null===e.value)-1!==t.dom.selectedIndex&&(t.dom.value=null);else{var r=""+e.value;t.dom.value===r&&-1!==t.dom.selectedIndex||(t.dom.value=r)}"selectedIndex"in e&&k(t,"selectedIndex",null,e.selectedIndex,void 0)}(e,c)}}(t,e,o,a,c)}else!function(t,e,r,o,i){(function(t,e){var r;if("function"==typeof t.tag.view){if(t.state=Object.create(t.tag),null!=(r=t.state.view).$$reentrantLock$$)return;r.$$reentrantLock$$=!0}else{if(t.state=void 0,null!=(r=t.tag).$$reentrantLock$$)return;r.$$reentrantLock$$=!0,t.state=null!=t.tag.prototype&&"function"==typeof t.tag.prototype.view?new t.tag(t):t.tag(t)}if(R(t.state,t,e),null!=t.attrs&&R(t.attrs,t,e),t.instance=n.normalize(s.call(t.state.view,t)),t.instance===t)throw Error("A view cannot return the vnode it received as argument");r.$$reentrantLock$$=null})(e,r),null!=e.instance?(f(t,e.instance,r,o,i),e.dom=e.instance.dom,e.domSize=null!=e.dom?e.instance.domSize:0):e.domSize=0}(t,e,o,a,c)}var l={caption:"table",thead:"table",tbody:"table",tfoot:"table",tr:"tbody",th:"tr",td:"tr",colgroup:"table",col:"colgroup"};function p(t,e,n,o){var i=e.children.match(/^\s*?<(\w+)/im)||[],a=r.createElement(l[i[1]]||"div");"http://www.w3.org/2000/svg"===n?(a.innerHTML='<svg xmlns="http://www.w3.org/2000/svg">'+e.children+"</svg>",a=a.firstChild):a.innerHTML=e.children,e.dom=a.firstChild,e.domSize=a.childNodes.length,e.instance=[];for(var s,c=r.createDocumentFragment();s=a.firstChild;)e.instance.push(s),c.appendChild(s);w(t,c,o)}function h(t,e,r,n,o,i){if(e!==r&&(null!=e||null!=r))if(null==e||0===e.length)u(t,r,0,r.length,n,o,i);else if(null==r||0===r.length)x(t,e,0,e.length);else{var a=null!=e[0]&&null!=e[0].key,s=null!=r[0]&&null!=r[0].key,c=0,l=0;if(!a)for(;l<e.length&&null==e[l];)l++;if(!s)for(;c<r.length&&null==r[c];)c++;if(a!==s)x(t,e,l,e.length),u(t,r,c,r.length,n,o,i);else if(s){for(var p,h,b,w,O,S=e.length-1,P=r.length-1;S>=l&&P>=c&&(b=e[S],w=r[P],b.key===w.key);)b!==w&&m(t,b,w,n,o,i),null!=w.dom&&(o=w.dom),S--,P--;for(;S>=l&&P>=c&&(p=e[l],h=r[c],p.key===h.key);)l++,c++,p!==h&&m(t,p,h,n,g(e,l,o),i);for(;S>=l&&P>=c&&c!==P&&p.key===w.key&&b.key===h.key;)v(t,b,O=g(e,l,o)),b!==h&&m(t,b,h,n,O,i),++c<=--P&&v(t,p,o),p!==w&&m(t,p,w,n,o,i),null!=w.dom&&(o=w.dom),l++,b=e[--S],w=r[P],p=e[l],h=r[c];for(;S>=l&&P>=c&&b.key===w.key;)b!==w&&m(t,b,w,n,o,i),null!=w.dom&&(o=w.dom),P--,b=e[--S],w=r[P];if(c>P)x(t,e,l,S+1);else if(l>S)u(t,r,c,P+1,n,o,i);else{var E,k,I=o,D=P-c+1,M=new Array(D),A=0,C=0,T=2147483647,L=0;for(C=0;C<D;C++)M[C]=-1;for(C=P;C>=c;C--){null==E&&(E=d(e,l,S+1));var B=E[(w=r[C]).key];null!=B&&(T=B<T?B:-1,M[C-c]=B,b=e[B],e[B]=null,b!==w&&m(t,b,w,n,o,i),null!=w.dom&&(o=w.dom),L++)}if(o=I,L!==S-l+1&&x(t,e,l,S+1),0===L)u(t,r,c,P+1,n,o,i);else if(-1===T)for(k=function(t){var e=[0],r=0,n=0,o=0,i=y.length=t.length;for(o=0;o<i;o++)y[o]=t[o];for(o=0;o<i;++o)if(-1!==t[o]){var a=e[e.length-1];if(t[a]<t[o])y[o]=a,e.push(o);else{for(r=0,n=e.length-1;r<n;){var s=(r>>>1)+(n>>>1)+(r&n&1);t[e[s]]<t[o]?r=s+1:n=s}t[o]<t[e[r]]&&(r>0&&(y[o]=e[r-1]),e[r]=o)}}for(n=e[(r=e.length)-1];r-- >0;)e[r]=n,n=y[n];return y.length=0,e}(M),A=k.length-1,C=P;C>=c;C--)h=r[C],-1===M[C-c]?f(t,h,n,i,o):k[A]===C-c?A--:v(t,h,o),null!=h.dom&&(o=r[C].dom);else for(C=P;C>=c;C--)h=r[C],-1===M[C-c]&&f(t,h,n,i,o),null!=h.dom&&(o=r[C].dom)}}else{var _=e.length<r.length?e.length:r.length;for(c=c<l?c:l;c<_;c++)(p=e[c])===(h=r[c])||null==p&&null==h||(null==p?f(t,h,n,i,g(e,c+1,o)):null==h?j(t,p):m(t,p,h,n,g(e,c+1,o),i));e.length>_&&x(t,e,c,e.length),r.length>_&&u(t,r,c,r.length,n,o,i)}}}function m(t,e,r,o,a,c){var u=e.tag;if(u===r.tag){if(r.state=e.state,r.events=e.events,function(t,e){do{var r;if(null!=t.attrs&&"function"==typeof t.attrs.onbeforeupdate&&void 0!==(r=s.call(t.attrs.onbeforeupdate,t,e))&&!r)break;if("string"!=typeof t.tag&&"function"==typeof t.state.onbeforeupdate&&void 0!==(r=s.call(t.state.onbeforeupdate,t,e))&&!r)break;return!1}while(0);return t.dom=e.dom,t.domSize=e.domSize,t.instance=e.instance,t.attrs=e.attrs,t.children=e.children,t.text=e.text,!0}(r,e))return;if("string"==typeof u)switch(null!=r.attrs&&N(r.attrs,r,o),u){case"#":!function(t,e){t.children.toString()!==e.children.toString()&&(t.dom.nodeValue=e.children),e.dom=t.dom}(e,r);break;case"<":!function(t,e,r,n,o){e.children!==r.children?(S(t,e),p(t,r,n,o)):(r.dom=e.dom,r.domSize=e.domSize,r.instance=e.instance)}(t,e,r,c,a);break;case"[":!function(t,e,r,n,o,i){h(t,e.children,r.children,n,o,i);var a=0,s=r.children;if(r.dom=null,null!=s){for(var c=0;c<s.length;c++){var u=s[c];null!=u&&null!=u.dom&&(null==r.dom&&(r.dom=u.dom),a+=u.domSize||1)}1!==a&&(r.domSize=a)}}(t,e,r,o,a,c);break;default:!function(t,e,r,n){var o=e.dom=t.dom;n=i(e)||n,"textarea"===e.tag&&null==e.attrs&&(e.attrs={}),function(t,e,r,n){if(e&&e===r&&console.warn("Don't reuse attrs object, use new object for every redraw, this will throw in next major"),null!=r){"input"===t.tag&&null!=r.type&&t.dom.setAttribute("type",r.type);var o="input"===t.tag&&"file"===r.type;for(var i in r)k(t,i,e&&e[i],r[i],n,o)}var a;if(null!=e)for(var i in e)null==(a=e[i])||null!=r&&null!=r[i]||I(t,i,a,n)}(e,t.attrs,e.attrs,n),O(e)||h(o,t.children,e.children,r,null,n)}(e,r,o,c)}else!function(t,e,r,o,i,a){if(r.instance=n.normalize(s.call(r.state.view,r)),r.instance===r)throw Error("A view cannot return the vnode it received as argument");N(r.state,r,o),null!=r.attrs&&N(r.attrs,r,o),null!=r.instance?(null==e.instance?f(t,r.instance,o,a,i):m(t,e.instance,r.instance,o,i,a),r.dom=r.instance.dom,r.domSize=r.instance.domSize):null!=e.instance?(j(t,e.instance),r.dom=void 0,r.domSize=0):(r.dom=e.dom,r.domSize=e.domSize)}(t,e,r,o,a,c)}else j(t,e),f(t,r,o,c,a)}function d(t,e,r){for(var n=Object.create(null);e<r;e++){var o=t[e];if(null!=o){var i=o.key;null!=i&&(n[i]=e)}}return n}var y=[];function g(t,e,r){for(;e<t.length;e++)if(null!=t[e]&&null!=t[e].dom)return t[e].dom;return r}function v(t,e,n){var o=r.createDocumentFragment();b(t,o,e),w(t,o,n)}function b(t,e,r){for(;null!=r.dom&&r.dom.parentNode===t;){if("string"!=typeof r.tag){if(null!=(r=r.instance))continue}else if("<"===r.tag)for(var n=0;n<r.instance.length;n++)e.appendChild(r.instance[n]);else if("["!==r.tag)e.appendChild(r.dom);else if(1===r.children.length){if(null!=(r=r.children[0]))continue}else for(n=0;n<r.children.length;n++){var o=r.children[n];null!=o&&b(t,e,o)}break}}function w(t,e,r){null!=r?t.insertBefore(e,r):t.appendChild(e)}function O(t){if(null==t.attrs||null==t.attrs.contenteditable&&null==t.attrs.contentEditable)return!1;var e=t.children;if(null!=e&&1===e.length&&"<"===e[0].tag){var r=e[0].children;t.dom.innerHTML!==r&&(t.dom.innerHTML=r)}else if(null!=e&&0!==e.length)throw new Error("Child node of a contenteditable must be trusted.");return!0}function x(t,e,r,n){for(var o=r;o<n;o++){var i=e[o];null!=i&&j(t,i)}}function j(t,e){var r,n,o,i=0,c=e.state;if("string"!=typeof e.tag&&"function"==typeof e.state.onbeforeremove&&null!=(o=s.call(e.state.onbeforeremove,e))&&"function"==typeof o.then&&(i=1,r=o),e.attrs&&"function"==typeof e.attrs.onbeforeremove&&null!=(o=s.call(e.attrs.onbeforeremove,e))&&"function"==typeof o.then&&(i|=2,n=o),a(e,c),i){if(null!=r){var u=function(){1&i&&((i&=2)||f())};r.then(u,u)}null!=n&&(u=function(){2&i&&((i&=1)||f())},n.then(u,u))}else E(e),P(t,e);function f(){a(e,c),E(e),P(t,e)}}function S(t,e){for(var r=0;r<e.instance.length;r++)t.removeChild(e.instance[r])}function P(t,e){for(;null!=e.dom&&e.dom.parentNode===t;){if("string"!=typeof e.tag){if(null!=(e=e.instance))continue}else if("<"===e.tag)S(t,e);else{if("["!==e.tag&&(t.removeChild(e.dom),!Array.isArray(e.children)))break;if(1===e.children.length){if(null!=(e=e.children[0]))continue}else for(var r=0;r<e.children.length;r++){var n=e.children[r];null!=n&&P(t,n)}}break}}function E(t){if("string"!=typeof t.tag&&"function"==typeof t.state.onremove&&s.call(t.state.onremove,t),t.attrs&&"function"==typeof t.attrs.onremove&&s.call(t.attrs.onremove,t),"string"!=typeof t.tag)null!=t.instance&&E(t.instance);else{var e=t.children;if(Array.isArray(e))for(var r=0;r<e.length;r++){var n=e[r];null!=n&&E(n)}}}function k(t,e,n,o,i,a){if(!("key"===e||"is"===e||null==o||D(e)||n===o&&!function(t,e){return"value"===e||"checked"===e||"selectedIndex"===e||"selected"===e&&t.dom===c()||"option"===t.tag&&t.dom.parentNode===r.activeElement}(t,e)&&"object"!=typeof o||"type"===e&&"input"===t.tag)){if("o"===e[0]&&"n"===e[1])return U(t,e,o);if("xlink:"===e.slice(0,6))t.dom.setAttributeNS("http://www.w3.org/1999/xlink",e.slice(6),o);else if("style"===e)B(t.dom,n,o);else if(M(t,e,i)){if("value"===e){if(("input"===t.tag||"textarea"===t.tag)&&t.dom.value===""+o&&(a||t.dom===c()))return;if("select"===t.tag&&null!==n&&t.dom.value===""+o)return;if("option"===t.tag&&null!==n&&t.dom.value===""+o)return;if(a&&""+o!="")return void console.error("`value` is read-only on file inputs!")}t.dom[e]=o}else"boolean"==typeof o?o?t.dom.setAttribute(e,""):t.dom.removeAttribute(e):t.dom.setAttribute("className"===e?"class":e,o)}}function I(t,e,r,n){if("key"!==e&&"is"!==e&&null!=r&&!D(e))if("o"===e[0]&&"n"===e[1])U(t,e,void 0);else if("style"===e)B(t.dom,r,null);else if(!M(t,e,n)||"className"===e||"title"===e||"value"===e&&("option"===t.tag||"select"===t.tag&&-1===t.dom.selectedIndex&&t.dom===c())||"input"===t.tag&&"type"===e){var o=e.indexOf(":");-1!==o&&(e=e.slice(o+1)),!1!==r&&t.dom.removeAttribute("className"===e?"class":e)}else t.dom[e]=null}function D(t){return"oninit"===t||"oncreate"===t||"onupdate"===t||"onremove"===t||"onbeforeremove"===t||"onbeforeupdate"===t}function M(t,e,r){return void 0===r&&(t.tag.indexOf("-")>-1||null!=t.attrs&&t.attrs.is||"href"!==e&&"list"!==e&&"form"!==e&&"width"!==e&&"height"!==e)&&e in t.dom}var A,C=/[A-Z]/g;function T(t){return"-"+t.toLowerCase()}function L(t){return"-"===t[0]&&"-"===t[1]?t:"cssFloat"===t?"float":t.replace(C,T)}function B(t,e,r){if(e===r);else if(null==r)t.style.cssText="";else if("object"!=typeof r)t.style.cssText=r;else if(null==e||"object"!=typeof e)for(var n in t.style.cssText="",r)null!=(o=r[n])&&t.style.setProperty(L(n),String(o));else{for(var n in r){var o;null!=(o=r[n])&&(o=String(o))!==String(e[n])&&t.style.setProperty(L(n),o)}for(var n in e)null!=e[n]&&null==r[n]&&t.style.removeProperty(L(n))}}function _(){this._=e}function U(t,r,n){if(null!=t.events){if(t.events._=e,t.events[r]===n)return;null==n||"function"!=typeof n&&"object"!=typeof n?(null!=t.events[r]&&t.dom.removeEventListener(r.slice(2),t.events,!1),t.events[r]=void 0):(null==t.events[r]&&t.dom.addEventListener(r.slice(2),t.events,!1),t.events[r]=n)}else null==n||"function"!=typeof n&&"object"!=typeof n||(t.events=new _,t.dom.addEventListener(r.slice(2),t.events,!1),t.events[r]=n)}function R(t,e,r){"function"==typeof t.oninit&&s.call(t.oninit,e),"function"==typeof t.oncreate&&r.push(s.bind(t.oncreate,e))}function N(t,e,r){"function"==typeof t.onupdate&&r.push(s.bind(t.onupdate,e))}return _.prototype=Object.create(null),_.prototype.handleEvent=function(t){var e,r=this["on"+t.type];"function"==typeof r?e=r.call(t.currentTarget,t):"function"==typeof r.handleEvent&&r.handleEvent(t),this._&&!1!==t.redraw&&(0,this._)(),!1===e&&(t.preventDefault(),t.stopPropagation())},function(t,r,o){if(!t)throw new TypeError("DOM element being rendered to does not exist.");if(null!=A&&t.contains(A))throw new TypeError("Node is currently being rendered to and thus is locked.");var i=e,a=A,s=[],u=c(),f=t.namespaceURI;A=t,e="function"==typeof o?o:void 0;try{null==t.vnodes&&(t.textContent=""),r=n.normalizeChildren(Array.isArray(r)?r:[r]),h(t,t.vnodes,r,s,null,"http://www.w3.org/1999/xhtml"===f?void 0:f),t.vnodes=r,null!=u&&c()!==u&&"function"==typeof u.focus&&u.focus();for(var l=0;l<s.length;l++)s[l]()}finally{e=i,A=a}}}},665:(t,e,r)=>{"use strict";var n=r(165);t.exports=function(t){return null==t&&(t=""),n("<",void 0,void 0,t,void 0,void 0)}},165:t=>{"use strict";function e(t,e,r,n,o,i){return{tag:t,key:e,attrs:r,children:n,text:o,dom:i,domSize:void 0,state:void 0,events:void 0,instance:void 0}}e.normalize=function(t){return Array.isArray(t)?e("[",void 0,void 0,e.normalizeChildren(t),void 0,void 0):null==t||"boolean"==typeof t?null:"object"==typeof t?t:e("#",void 0,void 0,String(t),void 0,void 0)},e.normalizeChildren=function(t){var r=[];if(t.length){for(var n=null!=t[0]&&null!=t[0].key,o=1;o<t.length;o++)if((null!=t[o]&&null!=t[o].key)!==n)throw new TypeError(!n||null==t[o]&&"boolean"!=typeof t[o]?"In fragments, vnodes must either all have keys or none have keys.":"In fragments, vnodes must either all have keys or none have keys. You may wish to consider using an explicit keyed empty fragment, m.fragment({key: ...}), instead of a hole.");for(o=0;o<t.length;o++)r[o]=e.normalize(t[o])}return r},t.exports=e},975:(t,e,r)=>{"use strict";var n=r(921),o=r(199);t.exports=r(389)("undefined"!=typeof window?window:null,n,o.redraw)},389:(t,e,r)=>{"use strict";var n=r(555),o=r(795);t.exports=function(t,e,r){var i=0;function a(t){return new e(t)}function s(t){return function(o,i){"string"!=typeof o?(i=o,o=o.url):null==i&&(i={});var s=new e((function(e,r){t(n(o,i.params),i,(function(t){if("function"==typeof i.type)if(Array.isArray(t))for(var r=0;r<t.length;r++)t[r]=new i.type(t[r]);else t=new i.type(t);e(t)}),r)}));if(!0===i.background)return s;var c=0;function u(){0==--c&&"function"==typeof r&&r()}return function t(e){var r=e.then;return e.constructor=a,e.then=function(){c++;var n=r.apply(e,arguments);return n.then(u,(function(t){if(u(),0===c)throw t})),t(n)},e}(s)}}function c(t,e){for(var r in t.headers)if(o.call(t.headers,r)&&r.toLowerCase()===e)return!0;return!1}return a.prototype=e.prototype,a.__proto__=e,{request:s((function(e,r,n,i){var a,s=null!=r.method?r.method.toUpperCase():"GET",u=r.body,f=(null==r.serialize||r.serialize===JSON.serialize)&&!(u instanceof t.FormData||u instanceof t.URLSearchParams),l=r.responseType||("function"==typeof r.extract?"":"json"),p=new t.XMLHttpRequest,h=!1,m=!1,d=p,y=p.abort;for(var g in p.abort=function(){h=!0,y.call(this)},p.open(s,e,!1!==r.async,"string"==typeof r.user?r.user:void 0,"string"==typeof r.password?r.password:void 0),f&&null!=u&&!c(r,"content-type")&&p.setRequestHeader("Content-Type","application/json; charset=utf-8"),"function"==typeof r.deserialize||c(r,"accept")||p.setRequestHeader("Accept","application/json, text/*"),r.withCredentials&&(p.withCredentials=r.withCredentials),r.timeout&&(p.timeout=r.timeout),p.responseType=l,r.headers)o.call(r.headers,g)&&p.setRequestHeader(g,r.headers[g]);p.onreadystatechange=function(t){if(!h&&4===t.target.readyState)try{var o,a=t.target.status>=200&&t.target.status<300||304===t.target.status||/^file:\/\//i.test(e),s=t.target.response;if("json"===l){if(!t.target.responseType&&"function"!=typeof r.extract)try{s=JSON.parse(t.target.responseText)}catch(t){s=null}}else l&&"text"!==l||null==s&&(s=t.target.responseText);if("function"==typeof r.extract?(s=r.extract(t.target,r),a=!0):"function"==typeof r.deserialize&&(s=r.deserialize(s)),a)n(s);else{var c=function(){try{o=t.target.responseText}catch(t){o=s}var e=new Error(o);e.code=t.target.status,e.response=s,i(e)};0===p.status?setTimeout((function(){m||c()})):c()}}catch(t){i(t)}},p.ontimeout=function(t){m=!0;var e=new Error("Request timed out");e.code=t.target.status,i(e)},"function"==typeof r.config&&(p=r.config(p,r,e)||p)!==d&&(a=p.abort,p.abort=function(){h=!0,a.call(this)}),null==u?p.send():"function"==typeof r.serialize?p.send(r.serialize(u)):u instanceof t.FormData||u instanceof t.URLSearchParams?p.send(u):p.send(JSON.stringify(u))})),jsonp:s((function(e,r,n,o){var a=r.callbackName||"_mithril_"+Math.round(1e16*Math.random())+"_"+i++,s=t.document.createElement("script");t[a]=function(e){delete t[a],s.parentNode.removeChild(s),n(e)},s.onerror=function(){delete t[a],s.parentNode.removeChild(s),o(new Error("JSONP request failed"))},s.src=e+(e.indexOf("?")<0?"?":"&")+encodeURIComponent(r.callbackKey||"callback")+"="+encodeURIComponent(a),t.document.documentElement.appendChild(s)}))}}},843:(t,e,r)=>{"use strict";var n=r(199);t.exports=r(804)("undefined"!=typeof window?window:null,n)},910:(t,e,r)=>{"use strict";var n=r(795);t.exports=Object.assign||function(t,e){for(var r in e)n.call(e,r)&&(t[r]=e[r])}},333:(t,e,r)=>{"use strict";var n=r(795),o=new RegExp("^(?:key|oninit|oncreate|onbeforeupdate|onupdate|onbeforeremove|onremove)$");t.exports=function(t,e){var r={};if(null!=e)for(var i in t)n.call(t,i)&&!o.test(i)&&e.indexOf(i)<0&&(r[i]=t[i]);else for(var i in t)n.call(t,i)&&!o.test(i)&&(r[i]=t[i]);return r}},795:t=>{"use strict";t.exports={}.hasOwnProperty},72:t=>{"use strict";var e=[];function r(t){for(var r=-1,n=0;n<e.length;n++)if(e[n].identifier===t){r=n;break}return r}function n(t,n){for(var i={},a=[],s=0;s<t.length;s++){var c=t[s],u=n.base?c[0]+n.base:c[0],f=i[u]||0,l="".concat(u," ").concat(f);i[u]=f+1;var p=r(l),h={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==p)e[p].references++,e[p].updater(h);else{var m=o(h,n);n.byIndex=s,e.splice(s,0,{identifier:l,updater:m,references:1})}a.push(l)}return a}function o(t,e){var r=e.domAPI(e);return r.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;r.update(t=e)}else r.remove()}}t.exports=function(t,o){var i=n(t=t||[],o=o||{});return function(t){t=t||[];for(var a=0;a<i.length;a++){var s=r(i[a]);e[s].references--}for(var c=n(t,o),u=0;u<i.length;u++){var f=r(i[u]);0===e[f].references&&(e[f].updater(),e.splice(f,1))}i=c}}},659:t=>{"use strict";var e={};t.exports=function(t,r){var n=function(t){if(void 0===e[t]){var r=document.querySelector(t);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(t){r=null}e[t]=r}return e[t]}(t);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(r)}},540:t=>{"use strict";t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},56:(t,e,r)=>{"use strict";t.exports=function(t){var e=r.nc;e&&t.setAttribute("nonce",e)}},825:t=>{"use strict";t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(r){!function(t,e,r){var n="";r.supports&&(n+="@supports (".concat(r.supports,") {")),r.media&&(n+="@media ".concat(r.media," {"));var o=void 0!==r.layer;o&&(n+="@layer".concat(r.layer.length>0?" ".concat(r.layer):""," {")),n+=r.css,o&&(n+="}"),r.media&&(n+="}"),r.supports&&(n+="}");var i=r.sourceMap;i&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleTagTransform(n,t,e.options)}(e,t,r)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},113:t=>{"use strict";t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},516:(t,e,r)=>{"use strict";t.exports=r.p+"0ac3d125cd1ee233f9a4.woff2"},298:(t,e,r)=>{"use strict";t.exports=r.p+"84ef8784a2ea511872fa.png"}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={id:n,exports:{}};return t[n](i,i.exports,r),i.exports}r.m=t,r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t;r.g.importScripts&&(t=r.g.location+"");var e=r.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");if(n.length)for(var o=n.length-1;o>-1&&(!t||!/^http(s?):/.test(t));)t=n[o--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=t})(),r.b=document.baseURI||self.location.href,r.nc=void 0,(()=>{"use strict";var t=r(862),e=r.n(t);const n=function(t){return e()("div.state-box",{key:"state-ui"},[e()("div.button-row",{key:"state-global-buttons"},e()("button",{onclick:function(){t.engine.state.loadFromLocalStorage()}},"Load State"),e()("button",{onclick:function(){t.engine.state.saveIntoLocalStorage()}},"Save State"),e()("button",{onclick:function(){t.engine.state.clear()}},"Clear State"),e()("button",{onclick:function(){var e=prompt("Serialized content (copy/paste):",t.engine.state.serialize());e&&t.engine.state.unserialize(e)}},"Import/Export State"))])};function o(t,e){return new Promise((function(r){var n=document.createElement("a");n.href=t,n.download=e,document.body.appendChild(n),n.click(),setTimeout((function(){try{var t;null===(t=n.parentNode)||void 0===t||t.removeChild(n)}catch(t){}r()}),15e3)}))}function i(t){var r=t.engine;if(!r)return null;var n=[e()("option",{value:""},"<< Add module... >>")],o=r.state.modules;return Object.keys(o).forEach((function(t){var r=o[t];n.push(e()("option",{value:t},"".concat(r.friendlyName||t)))})),e()("div.module-selector",{key:"module-sel"},e()("select",{onchange:function(t){var e=t.target;r.state.addModule(e.value),e.value=""}},n))}function a(t,e,r){var n=t.indexOf(e);return-1===n?e:t[(n+r+t.length)%t.length]}var s=function(t,r,n){var o=n.enabled&&n.probability>0,i=n.module.params||[],s=i.length?e()("button",{onclick:function(){n.uiVisible=!n.uiVisible},title:n.uiVisible?"Collapse":"Expand"},e()("i.icon-th-small")):null;return e()("div.def-edit".concat(o?"":".disabled"),{key:n.id},[e()("div.def-kit.button-row",[e()("div.module-name",[n.moduleName]),e()("input.prob-slider",{oninput:function(t){t.target&&(n.probability=t.target.valueAsNumber)},value:n.probability,min:0,max:1,step:.01,type:"range",title:"probability: ".concat(n.probability.toFixed(2))}),s,e()("button",{onclick:function(){n.enabled=!n.enabled},title:n.enabled?"Disable":"Enable"},e()("i.icon-power")),e()("button",{onclick:function(){r.deleteDef(n)},title:"Delete"},e()("i.icon-times")),e()("button",{onclick:function(){r.moveDef(n,-1)},title:"Move Up"},e()("i.icon-arrow-up-thick")),e()("button",{onclick:function(){r.moveDef(n,1)},title:"Move down"},e()("i.icon-arrow-down-thick")),e()("button",{onclick:function(){!function(t){(t.module.params||[]).forEach((function(e){var r=e.name,n=Math.random();switch(e.randomBias&&(n=Math.pow(n,e.randomBias)),e.type){case"bool":t.options[r]=n<=.5;break;case"num":case"int":var o=e.min||0,i=o+n*((e.max||1)-o);"int"===e.type&&(i=Math.round(i)),t.options[r]=i;break;case"choice":e.choices&&(t.options[r]=e.choices[Math.floor(n*e.choices.length)])}}))}(n)},title:"Randomize"},e()("i.icon-arrow-shuffle")),e()("button",{onclick:function(){r.duplicateDef(n)},title:"Duplicate"},e()("i.icon-plus"))]),n.uiVisible?e()("div.params",i.map((function(t){return function(t,r){var n,o=r.name,i=[],s=t.options[o];if("bool"===r.type&&i.push(e()("label",e()("input",{onclick:function(){t.options[o]=!t.options[o]},checked:!!s,type:"checkbox"}),o)),"int"===r.type||"num"===r.type){i.push(e()("div.param-name",o));var c=function(e){e.target&&(t.options[o]=e.target.valueAsNumber)};i.push(e()("div.slider-and-input",e()("input.slider",{oninput:c,value:s,min:r.min,max:r.max,step:null!==r.step?r.step:1e-4,type:"range"}),e()("input.num",{oninput:c,value:s,step:null!==r.step?r.step:1e-4,type:"number"})))}return"choice"===r.type&&(i.push(e()("div.param-name",o)),i.push(e()("div",[e()("select",{value:s,oninput:function(e){e.target&&(t.options[o]=e.target.value)}},null===(n=r.choices)||void 0===n?void 0:n.map((function(t){return e()("option",{value:t},t)}))),e()("a",{href:"#",onclick:function(){var e=r.choices;e&&(t.options[o]=a(e,s,-1))}},e()("i.icon-flash")),"",e()("a",{href:"#",onclick:function(){var e=r.choices;e&&(t.options[o]=a(e,s,1))}},e()("i.icon-arrow-right-thick"))]))),e()("div.param.param-".concat(r.type),{key:"".concat(t.id,"-").concat(o)},i)}(n,t)}))):null])};function c(t){var r=t.engine.state;return e()("div.module-list",{key:"module-list"},r.defs.map((function(e){return s(t,r,e)})))}function u(t){return e()("div.fx-ui",{key:"fx-ui"},[i(t),c(t)])}const f=function(t){return e()("div.image",{key:"load-image"},e()("label",["Load Image: ",e()("input",{type:"file",id:"select-image",accept:"image/*",onchange:function(e){!function(t,e){var r=new FileReader;if(r.onload=function(t){var r,n=null===(r=t.target)||void 0===r?void 0:r.result,o=document.createElement("img");o.src=String(n),o.onload=function(){e(o)}},t.target){var n,o=null===(n=t.target.files)||void 0===n?void 0:n[0];o&&r.readAsDataURL(o)}}(e,(function(r){t.engine.sourceImage=r,e.target&&(e.target.value="")}))}})]),e()("div",{style:"opacity: .5"},"You can also paste image data from the clipboard."),e()("button",{onclick:function(){return function(t){var e=t.engine.sourceImage;if(e){var r,n="".concat(e.width,"x").concat(e.height);if(r=prompt("Enter the desired new size for the image.",n)){if(n===r)return;var o=/^(\d+)\s*x\s*(\d+)$/i.exec(r);if(!o)return;var i=parseInt(o[1],10),a=parseInt(o[2],10);if(!(i>0&&a>0))return void alert("Unable to parse new size.");var s=document.createElement("canvas");s.width=i,s.height=a;var c=s.getContext("2d");if(!c)return;c.drawImage(e,0,0,i,a);var u=s.toDataURL("image/png"),f=new Image;f.onload=function(){t.engine.sourceImage=f},f.src=u}}}(t)}},[e()("i.icon-arrow-maximise")," Resize"]),e()("label",[e()("input",{type:"checkbox",onchange:function(e){e.target&&(t.ui.zoom=e.target.checked)}}),"zoom down to fit"]))};var l=r(529),p=r.n(l);const h=r.p+"b1c876b7dfdd639e79bfe6f8da1d2c1e.js";var m=function(t){return e()("button",{onclick:function(){t.engine.toURL("image/png").then((function(t){o(t,"glitch-".concat((new Date).toISOString(),".png")).then((function(){/^blob:/.test(t)&&URL.revokeObjectURL(t)}))}))},title:"Save Current Image"},e()("i.icon-flash")," Save Current Image")},d=function(t){var r=e()("button",{onclick:function(){t.engine.rate=0,t.engine.renderFrame()},title:"manual refresh"},e()("i.icon-refresh")," Refresh"),n=e()("span",[e()("label"," Refresh rate: "),e()("input",{type:"number",step:1,min:0,max:1e3,value:t.engine.rate,oninput:function(){t.engine.rate=0|this.value}})]);return e()("div.button-row",[m(t),e()("div",[n,r])])};const y=function(t){return e()("div.recorder",{key:"recorder"},[d(t),e()("div.button-row",[e()("button",{onclick:function(e){t.recordFrames.push({data:t.engine.toDataURL()}),e.preventDefault()}},e()("i.icon-camera")," Add Frame"),e()("button",{onclick:function(){var r=function(t){var e=new(p())({workerScript:h,workers:2,quality:10});return t.forEach((function(t){var r=document.createElement("img");r.src=t.data,e.addFrame(r,{delay:50})})),e.render(),e}(t.recordFrames);r.on("progress",(function(r){t.gifRenderProgress=r,e().redraw()})),r.on("finished",(function(r){t.gifRenderProgress=null,e().redraw(),o(URL.createObjectURL(r),"glitchgif-".concat(+new Date,".gif"))})),t.gifRenderProgress=0},disabled:0===t.recordFrames.length||null!==t.gifRenderProgress},e()("i.icon-flash"),null!==t.gifRenderProgress?"Rendering ".concat((100*t.gifRenderProgress).toFixed(1),"%"):" Save GIF"),e()("button",{onclick:function(e){confirm("Clear animation?")&&(t.recordFrames=[]),e.preventDefault()},disabled:0===t.recordFrames.length},e()("i.icon-trash")," Clear")]),e()("div.frames.".concat(t.ui.fx?"slim":"phat"),t.recordFrames.map((function(r,n){return e()("div.frame",[e()("img",{src:r.data}),e()("div.tools",[e()("button",{onclick:function(){t.recordFrames.splice(n,1)}},[e()("i.icon-times")])])])})))])};var g=function(t,r,n){return e()("a",{href:"#",onclick:function(e){t.ui[r]=!t.ui[r],e.preventDefault()}},"".concat(t.ui[r]?"-":"+"," ").concat(n))};const v=function(t){return e()("div.title",{key:"title-ui"},[e()("a.by",{href:"https://github.com/akx/glitch2",target:"_blank"},"glitcher by @akx"),g(t,"stateMgmt","state"),g(t,"recorder","recorder"),g(t,"image","image"),g(t,"fx","fx"),g(t,"misc","misc")])};function b(t){var r=t.state;return document.body.classList.toggle("zoom-canvas-to-fit",r.ui.zoom),e()("div",[v(r),r.ui.stateMgmt?n(r):null,r.ui.image?f(r):null,r.ui.recorder?y(r):null,r.ui.fx?u(r):null,r.ui.misc?e()("div",{key:"misc"},["Render time: ".concat(r.engine.renderTime," ms")]):null].filter(Boolean))}function w(t){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(t)}function O(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function x(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?O(Object(r),!0).forEach((function(e){var n,o,i,a;n=t,o=e,i=r[e],a=function(t,e){if("object"!=w(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o),(o="symbol"==w(a)?a:a+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function j(t,e){return x({type:"num",min:0,max:1,step:null,name:t},e)}function S(t,e){return x({type:"int",min:0,max:100,step:1,name:t},e)}function P(t,e){return x({type:"bool",name:t},e)}function E(t,e,r){return x({type:"choice",name:t,choices:e},r)}const k=["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","copy","xor","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"];function I(t){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},I(t)}function D(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function M(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?D(Object(r),!0).forEach((function(e){var n,o,i,a;n=t,o=e,i=r[e],a=function(t,e){if("object"!=I(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=I(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o),(o="symbol"==I(a)?a:a+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function A(t,e,r){var n=M(M({},C),e),o=t.getContext();o.filter=r(n),o.globalAlpha=n.blend,o.globalCompositeOperation=n.operation;for(var i=0;i<n.iterations;i++)o.drawImage(o.canvas,0,0);o.globalAlpha=1,o.globalCompositeOperation="source-over"}var C={blend:1,iterations:1,operation:"source-over"};A.paramDefaults=C;var T=[j("blend",{description:"blend"}),S("iterations",{min:1,max:15}),E("operation",k)];function L(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=function(e,r){return A(e,r,t)};return n.paramDefaults=M(M({},A.paramDefaults),r),n.params=e.concat(T),n}var B=L((function(t){var e=t.strength;return"blur(".concat(e,"px)")}),[j("strength",{max:100})],{strength:0}),_=L((function(t){var e=t.adjust;return"brightness(".concat(e,"%)")}),[j("adjust",{min:0,max:1e3})],{adjust:100}),U=L((function(t){var e=t.adjust;return"contrast(".concat(e,"%)")}),[j("adjust",{min:0,max:1e3})],{adjust:100}),R=L((function(t){var e=t.adjust;return"saturate(".concat(e,"%)")}),[j("adjust",{min:0,max:1e3})],{adjust:100}),N=L((function(t){var e=t.degrees;return"hue-rotate(".concat(e,"deg)")}),[j("degrees",{min:-180,max:180})],{degrees:0});function F(t,e,r,n,o){var i,a,s,c,u,f,l,p,h=t.data,m=e.data,d=m.length;l=r+n-r*n;for(var y=0;y<d;y+=4)switch(i=h[y]/255*r,c=m[y]/255*n,a=h[y+1]/255*r,u=m[y+1]/255*n,s=h[y+2]/255*r,f=m[y+2]/255*n,p=255/l,o){case"normal":case"src-over":m[y]=(i+c-c*r)*p,m[y+1]=(a+u-u*r)*p,m[y+2]=(s+f-f*r)*p;break;case"screen":m[y]=(i+c-i*c)*p,m[y+1]=(a+u-a*u)*p,m[y+2]=(s+f-s*f)*p;break;case"multiply":m[y]=(i*c+i*(1-n)+c*(1-r))*p,m[y+1]=(a*u+a*(1-n)+u*(1-r))*p,m[y+2]=(s*f+s*(1-n)+f*(1-r))*p;break;case"difference":m[y]=(i+c-2*Math.min(i*n,c*r))*p,m[y+1]=(a+u-2*Math.min(a*n,u*r))*p,m[y+2]=(s+f-2*Math.min(s*n,f*r))*p;break;case"src-in":p=255/(l=r*n),m[y+3]=255*l,m[y]=i*n*p,m[y+1]=a*n*p,m[y+2]=s*n*p;break;case"plus":case"add":m[y]=Math.min(i+c,1)*p,m[y+1]=Math.min(a+u,1)*p,m[y+2]=Math.min(s+f,1)*p;break;case"overlay":m[y]=c<=.5?2*h[y]*c/n:255-(2-2*c/n)*(255-h[y]),m[y+1]=u<=.5?2*h[y+1]*u/n:255-(2-2*u/n)*(255-h[y+1]),m[y+2]=f<=.5?2*h[y+2]*f/n:255-(2-2*f/n)*(255-h[y+2]);break;case"hardlight":m[y]=i<=.5?2*m[y]*i/n:255-(2-2*i/r)*(255-m[y]),m[y+1]=a<=.5?2*m[y+1]*a/n:255-(2-2*a/r)*(255-m[y+1]),m[y+2]=s<=.5?2*m[y+2]*s/n:255-(2-2*s/r)*(255-m[y+2]);break;case"colordodge":case"dodge":255===h[y]&&0===c?m[y]=255:m[y]=Math.min(255,m[y]/(255-h[y]))*p,255===h[y+1]&&0===u?m[y+1]=255:m[y+1]=Math.min(255,m[y+1]/(255-h[y+1]))*p,255===h[y+2]&&0===f?m[y+2]=255:m[y+2]=Math.min(255,m[y+2]/(255-h[y+2]))*p;break;case"colorburn":case"burn":0===h[y]&&0===c?m[y]=0:m[y]=(1-Math.min(1,(1-c)/i))*p,0===h[y+1]&&0===u?m[y+1]=0:m[y+1]=(1-Math.min(1,(1-u)/a))*p,0===h[y+2]&&0===f?m[y+2]=0:m[y+2]=(1-Math.min(1,(1-f)/s))*p;break;case"darken":case"darker":m[y]=(i>c?c:i)*p,m[y+1]=(a>u?u:a)*p,m[y+2]=(s>f?f:s)*p;break;case"lighten":case"lighter":m[y]=(i<c?c:i)*p,m[y+1]=(a<u?u:a)*p,m[y+2]=(s<f?f:s)*p;break;case"exclusion":m[y]=(c+i-2*c*i)*p,m[y+1]=(u+a-2*u*a)*p,m[y+2]=(f+s-2*f*s)*p;break;default:m[y]=m[y+3]=255,m[y+1]=y%8==0?255:0,m[y+2]=y%8==0?0:255}}F.modes=["normal","screen","multiply","difference","src-in","add","overlay","hardlight","dodge","burn","darker","lighter","exclusion"];const z=F;function $(t){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$(t)}function X(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function q(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?X(Object(r),!0).forEach((function(e){var n,o,i,a;n=t,o=e,i=r[e],a=function(t,e){if("object"!=$(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=$(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o),(o="symbol"==$(a)?a:a+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):X(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function G(t,e){var r=q(q({},Y),e),n=t.getImageData(),o=t.persist.afterimageData;o&&z(o,n,r.strengthOut,r.counterStrengthOut,"screen"),o&&r.strengthIn<1?z(n,o,r.strengthIn,1-r.strengthIn,"normal"):(t.setImageData(n),t.persist.afterimageData=t.copyImageData()),t.setImageData(n)}var Y={strengthOut:.2,counterStrengthOut:.3,strengthIn:.2};G.paramDefaults=Y,G.params=[j("strengthOut",{description:"Afterimage write strength"}),j("counterStrengthOut",{description:"Afterimage write counter-strength"}),j("strengthIn",{description:"Afterimage read strength"})];const W=G;var H={},V=function(t){return t},J=function(t,e){return e};const K=function(t){var e;if(t<=0)return V;if(t>=1)return J;var r=0|100*t;if(e=H[r])return e;var n=1-t;return H[r]=new Function("a","b","return b * ".concat(t," + a * ").concat(n))};function Q(t,e){return Math.floor(Math.random()*(e-t))+t}function Z(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Math.random()*(e-t)+t}function tt(t,e){for(;t<0;)t+=e;return t%e}function et(t,e,r){return void 0===r&&(r=e,e=0),t<e?e:t>=r?r:t}function rt(t,e){return t<0&&(t+=(1|t/-e)*e),0|t%e}function nt(t){return nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nt(t)}function ot(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function it(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ot(Object(r),!0).forEach((function(e){var n,o,i,a;n=t,o=e,i=r[e],a=function(t,e){if("object"!=nt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=nt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o),(o="symbol"==nt(a)?a:a+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ot(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function at(t,e){var r=it(it({},at.paramDefaults),e),n=t.copyImageData(),o=t.copyImageData();!function(t,e,r){for(var n=Q(r.strideInMin,r.strideInMax),o=Q(r.strideOutMin,r.strideOutMax),i=Q(-r.offInScale,r.offInScale),a=Q(-r.offOutScale,r.offOutScale),s=Q(r.minYDrift,r.maxYDrift),c=Z(r.feedbackMin,r.feedbackMax),u=K(c),f=e.data,l=f.length,p=t.data,h=p.length,m=t.width,d=0,y=0;y<h;++y){var g=i+y*n;g=rt(g+=(0|g/m)*s,l);var v=rt(a+y*o,h);c>0?d=p[v]=0|u(d,f[g]):p[v]=f[g]}for(var b=0;b<h;b+=4)p[b+3]=255}(o,n,r),t.setImageData(o)}at.paramDefaults={offInScale:0,offOutScale:0,strideInMin:1,strideInMax:7,strideOutMin:1,strideOutMax:7,feedbackMin:.2,feedbackMax:.8,minYDrift:0,maxYDrift:0},at.params=[S("offInScale",{description:""}),S("offOutScale",{description:""}),S("strideInMin",{description:"",randomBias:3}),S("strideInMax",{description:"",randomBias:3}),S("strideOutMin",{description:"",randomBias:3}),S("strideOutMax",{description:"",randomBias:3}),j("feedbackMin",{description:""}),j("feedbackMax",{description:""}),S("minYDrift",{description:""}),S("maxYDrift",{description:""})];const st=at;var ct=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],ut=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function ft(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}function lt(t){return lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lt(t)}function pt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ht(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?pt(Object(r),!0).forEach((function(e){var n,o,i,a;n=t,o=e,i=r[e],a=function(t,e){if("object"!=lt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=lt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o),(o="symbol"==lt(a)?a:a+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function mt(t,e){var r=ht(ht({},dt),e);if(!(r.strength<=0||r.radius<=0)){var n=t.getImageData(),o=t.copyImageData();!function(t,e,r,n,o,i){if(!(Number.isNaN(i)||i<1)){i|=0;var a,s,c,u,f,l,p,h,m,d,y,g,v,b,w,O,x,j,S,P,E,k=t.data,I=i+i+1,D=n-1,M=o-1,A=i+1,C=A*(A+1)/2,T=new ft,L=T;for(c=1;c<I;c++)L=L.next=new ft,c===A&&(E=L);L.next=T;var B=null,_=null;p=l=0;var U=ct[i],R=ut[i];for(s=0;s<o;s++){for(b=w=O=h=m=d=0,y=A*(x=k[l]),g=A*(j=k[l+1]),v=A*(S=k[l+2]),h+=C*x,m+=C*j,d+=C*S,L=T,c=0;c<A;c++)L.r=x,L.g=j,L.b=S,L=L.next;for(c=1;c<A;c++)u=l+((D<c?D:c)<<2),h+=(L.r=x=k[u])*(P=A-c),m+=(L.g=j=k[u+1])*P,d+=(L.b=S=k[u+2])*P,b+=x,w+=j,O+=S,L=L.next;for(B=T,_=E,a=0;a<n;a++)k[l]=h*U>>R,k[l+1]=m*U>>R,k[l+2]=d*U>>R,h-=y,m-=g,d-=v,y-=B.r,g-=B.g,v-=B.b,u=p+((u=a+i+1)<D?u:D)<<2,h+=b+=B.r=k[u],m+=w+=B.g=k[u+1],d+=O+=B.b=k[u+2],B=B.next,y+=x=_.r,g+=j=_.g,v+=S=_.b,b-=x,w-=j,O-=S,_=_.next,l+=4;p+=n}for(a=0;a<n;a++){for(w=O=b=m=d=h=0,y=A*(x=k[l=a<<2]),g=A*(j=k[l+1]),v=A*(S=k[l+2]),h+=C*x,m+=C*j,d+=C*S,L=T,c=0;c<A;c++)L.r=x,L.g=j,L.b=S,L=L.next;for(f=n,c=1;c<=i;c++)l=f+a<<2,h+=(L.r=x=k[l])*(P=A-c),m+=(L.g=j=k[l+1])*P,d+=(L.b=S=k[l+2])*P,b+=x,w+=j,O+=S,L=L.next,c<M&&(f+=n);for(l=a,B=T,_=E,s=0;s<o;s++)k[u=l<<2]=h*U>>R,k[u+1]=m*U>>R,k[u+2]=d*U>>R,h-=y,m-=g,d-=v,y-=B.r,g-=B.g,v-=B.b,u=a+((u=s+A)<M?u:M)*n<<2,h+=b+=B.r=k[u],m+=w+=B.g=k[u+1],d+=O+=B.b=k[u+2],B=B.next,y+=x=_.r,g+=j=_.g,v+=S=_.b,b-=x,w-=j,O-=S,_=_.next,l+=n}}}(o,0,0,n.width,n.height,r.radius);var i=r.counterStrength<0?1-r.strength:r.counterStrength;z(o,n,r.strength,i,"screen"),t.setImageData(n)}}var dt={radius:5,strength:.7,counterStrength:-1};mt.paramDefaults=dt,mt.params=[S("radius",{description:"blur radius"}),j("strength",{description:"bloom strength"}),j("counterStrength",{description:"bloom counter-strength, set to < 0 for auto"})];const yt=mt;function gt(t){return gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gt(t)}function vt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function bt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?vt(Object(r),!0).forEach((function(e){var n,o,i,a;n=t,o=e,i=r[e],a=function(t,e){if("object"!=gt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=gt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o),(o="symbol"==gt(a)?a:a+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function wt(t,e){var r=bt(bt({},Ot),e),n="buffer".concat(r.id),o=t.persist[n];if(o)if(r.blend>=1)t.setImageData(o);else{var i=t.getImageData();z(o,i,r.blend,1-r.blend,r.mode),t.setImageData(i)}}var Ot={id:0,blend:1,mode:"normal"};wt.paramDefaults=Ot,wt.params=[S("id",{description:"buffer ID"}),j("blend",{description:"blend%"}),E("mode",z.modes,{description:"blend mode"})];const xt=wt;function jt(t){return jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jt(t)}function St(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Pt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?St(Object(r),!0).forEach((function(e){var n,o,i,a;n=t,o=e,i=r[e],a=function(t,e){if("object"!=jt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=jt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o),(o="symbol"==jt(a)?a:a+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):St(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Et(t,e){var r=Pt(Pt({},kt),e),n="buffer".concat(r.id);t.persist[n]=r.reset?null:t.copyImageData()}var kt={id:0,reset:!1};Et.paramDefaults=kt,Et.params=[S("id",{description:"buffer ID"}),P("reset",{description:"reset the buffer"})];const It=Et;function Dt(t){return Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dt(t)}function Mt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function At(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Mt(Object(r),!0).forEach((function(e){var n,o,i,a;n=t,o=e,i=r[e],a=function(t,e){if("object"!=Dt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Dt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o),(o="symbol"==Dt(a)?a:a+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Mt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ct(t,e){for(var r=At(At({},Tt),e),n=t.getImageData(),o=n.data,i=n.height,a=n.width,s=Q(r.xMin%a,r.xMax%a),c=Q(r.yMin%i,r.yMax%i),u=function(t,e,r){return r?t^e:e},f=0;f<i;f+=c)for(var l=0;l<a;l+=s)for(var p=4*f*a+4*l,h=Z()<r.rXorChance,m=Z()<r.gXorChance,d=Z()<r.bXorChance,y=0;y<c;y++)for(var g=0;g<s;g++){var v=l+g,b=f+y;if(v>=0&&b>=0&&v<a&&b<i){var w=4*b*a+4*v;o[w]=u(o[w],o[p],h),o[w+1]=u(o[w+1],o[p+1],m),o[w+2]=u(o[w+2],o[p+2],d)}}t.setImageData(n)}var Tt={xMin:1,xMax:4,yMin:1,yMax:4,rXorChance:0,gXorChance:0,bXorChance:0};Ct.paramDefaults=Tt,Ct.params=[S("xMax",{min:1,max:800}),S("xMin",{min:1,max:800}),S("yMax",{min:1,max:800}),S("yMin",{min:1,max:800}),j("rXorChance"),j("gXorChance"),j("bXorChance")];const Lt=Ct;function Bt(t){return Bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bt(t)}function _t(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Ut(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?_t(Object(r),!0).forEach((function(e){var n,o,i,a;n=t,o=e,i=r[e],a=function(t,e){if("object"!=Bt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Bt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o),(o="symbol"==Bt(a)?a:a+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_t(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Rt(t,e){var r=Ut(Ut({},Nt),e),n=t.copyCanvas(),o=n.getContext("2d");if(o){o.imageSmoothingEnabled=r.smooth;for(var i=Q(r.minIterations,r.maxIterations),a=n.width,s=n.height,c=0;c<i;c++){if(Z()<r.xChance){var u=Q(0,a),f=1+Z(r.xMinStretch,r.xMaxStretch);if(Z()<.5){var l=u*f;o.drawImage(n,0,0,u,s,u-l,0,l,s)}else{var p=(a-u)*f;o.drawImage(n,u,0,a-u,s,u,0,p,s)}}if(Z()<r.yChance){var h=Q(0,s),m=1+Z(r.yMinStretch,r.yMaxStretch);if(Z()<.5){var d=h*m;o.drawImage(n,0,0,a,h,0,h-d,a,d)}else{var y=(s-h)*m;o.drawImage(n,0,h,a,s-h,0,h,a,y)}}}t.setImageData(o.getImageData(0,0,a,s))}}var Nt={minIterations:1,maxIterations:1,smooth:!0,xChance:.1,xMinStretch:0,xMaxStretch:.1,yChance:.1,yMinStretch:0,yMaxStretch:.1};Rt.paramDefaults=Nt,Rt.params=[S("minIterations",{min:0,max:100}),S("maxIterations",{min:0,max:100}),j("xChance",{max:1}),j("xMinStretch",{max:2}),j("xMaxStretch",{max:2}),j("yChance",{max:1}),j("yMinStretch",{max:2}),j("yMaxStretch",{max:2}),P("smooth")];const Ft=Rt;function zt(t,e){for(var r,n,o,i=t.data,a=e[0],s=e[1],c=e[2],u=e[3],f=e[4],l=e[5],p=e[6],h=e[7],m=e[8],d=e[9],y=e[10],g=e[11],v=e[12],b=e[13],w=e[14],O=i.length,x=0;x<O;x+=4)r=i[x]+a,n=i[x+1]+l,o=i[x+2]+y,i[x]=c*r+u*n+f*o+s,i[x+1]=h*r+m*n+d*o+p,i[x+2]=v*r+b*n+w*o+g}var $t=[0,0,.299,.587,.114,0,128,-.169,-.331,.5,0,128,.5,-.419,.081],Xt=[0,0,1,0,1.4,-128,0,1,-.343,-.711,-128,0,1,1.765,0];function qt(t){var e=t.getImageData();zt(e,Xt),t.setImageData(e)}qt.params=[];const Gt=qt;var Yt=r(609),Wt=r.n(Yt);function Ht(t){var e=document.createElement("canvas");e.width=t.width,e.height=t.height;var r=e.getContext("2d");if(!r)throw new Error("oops");return r.putImageData(t,0,0),e}function Vt(t,e,r,n){var o=document.createElement("canvas");o.width=0|e,o.height=0|r;var i=o.getContext("2d");if(!i)throw new Error("oops");return i.imageSmoothingEnabled=n,i.drawImage(t,0,0,e,r),i.getImageData(0,0,e,r)}function Jt(t){return Jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jt(t)}function Kt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Qt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Kt(Object(r),!0).forEach((function(e){var n,o,i,a;n=t,o=e,i=r[e],a=function(t,e){if("object"!=Jt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Jt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o),(o="symbol"==Jt(a)?a:a+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Kt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Zt(t,e){var r=Qt(Qt({},te),e),n=t.getImageData(),o=n,i=o.width,a=o.height,s=1!==r.scaleX&&r.scaleX>0||1!==r.scaleY&&r.scaleY>0;if(s&&(n=Vt(Ht(n),i*r.scaleX,a*r.scaleY,r.smoothScaleIn)),r.quality<100){var c=Wt().encode(n,r.quality).data;if(r.corruption>0)for(var u=new Uint8ClampedArray(c.buffer),f=0|u.length/2,l=u.length-16,p=f;p<l;p++)Math.random()<r.corruption&&(u[p]=0);try{var h=Wt().decode(c,{tolerantDecoding:!0,useTArray:!0});n=new ImageData(new Uint8ClampedArray(h.data),h.width,h.height)}catch(t){console.warn("JPEG failed:",t)}}s&&(n=Vt(Ht(n),i,a,r.smoothScaleOut)),t.setImageData(n)}var te={quality:30,scaleX:1,scaleY:1,smoothScaleIn:!0,smoothScaleOut:!0,corruption:0};Zt.paramDefaults=te,Zt.params=[S("quality",{min:1,max:100}),j("scaleX",{min:0,max:2,step:.001}),j("scaleY",{min:0,max:2,step:.001}),j("corruption",{min:0,max:.005,step:1e-4}),P("smoothScaleIn"),P("smoothScaleOut")];const ee=Zt;function re(t){return re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},re(t)}function ne(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function oe(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ne(Object(r),!0).forEach((function(e){var n,o,i,a;n=t,o=e,i=r[e],a=function(t,e){if("object"!=re(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=re(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o),(o="symbol"==re(a)?a:a+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ne(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ie(t,e,r,n,o,i){for(var a=t.width,s=t.height,c=t.data,u=4*a,f=c.length,l=0;l<s;++l)for(var p=l/s,h=l*u+(0|r+o*p),m=h,d=h+u;m<d;m+=4){var y=m+4+(0|n+i*p);y>=0&&y<f&&m>=0&&m<f&&(c[m]=0|e(c[m],c[y]))}}function ae(t,e){var r=oe(oe({},se),e);if(!(r.intensity<=0)){var n=Q(r.nMin,r.nMax);if(!(n<=0)){for(var o=t.getImageData(),i=K(r.intensity),a=0;a<n;a++)ie(o,i,r.magic1,r.magic2,r.yToMagic1,r.yToMagic2);t.setImageData(o)}}}var se={intensity:.5,magic1:0,magic2:0,yToMagic1:0,yToMagic2:0,nMin:10,nMax:10};ae.paramDefaults=se,ae.params=[j("intensity",{description:"Effect intensity"}),S("magic1",{description:"Magic 1",min:-40,max:40}),S("magic2",{description:"Magic 2",min:-40,max:40}),j("yToMagic1",{description:"Y coordinate to Magic 1",min:-100,max:100}),j("yToMagic2",{description:"Y coordinate to Magic 2",min:-100,max:100}),S("nMin",{description:"Min repetitions"}),S("nMax",{description:"Max repetitions"})];const ce=ae;function ue(t){return ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ue(t)}function fe(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function le(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?fe(Object(r),!0).forEach((function(e){var n,o,i,a;n=t,o=e,i=r[e],a=function(t,e){if("object"!=ue(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=ue(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o),(o="symbol"==ue(a)?a:a+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):fe(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function pe(t,e,r,n,o,i,a){var s,c,u,f,l,p=t.data,h=t.width;for(a&&(o<=0&&(o=0),i>=255&&(i=255)),s=e;s<r;++s)for(c=s*h*4,u=0;u<h;++u)(n>=1||Math.random()<n)&&(f=c+4*u,l=Q(o,i),a?(p[f++]=l,p[f++]=l,p[f++]=l):(p[f++]+=l,p[f++]+=l,p[f++]+=l))}function he(t,e){var r=le(le({},me),e),n=r.full?1:Q(r.nMin,r.nMax);if(!(n<=0)){var o=t.getImageData();if(r.full)pe(o,0,o.height,r.noisiness,r.brightnessMin,r.brightnessMax,r.replace);else for(var i=r.heightMin*o.height,a=r.heightMax*o.height,s=0;s<n;++s){var c=Q(i,a);if(!(c<=0)){var u=Q(0,o.height-c);pe(o,u,u+c,r.noisiness,r.brightnessMin,r.brightnessMax,r.replace)}}t.setImageData(o)}}var me={heightMin:0,heightMax:.1,nMin:0,nMax:10,brightnessMin:-50,brightnessMax:50,noisiness:1,replace:!1,full:!1};he.paramDefaults=me,he.params=[j("heightMin",{description:"Noise band min height"}),j("heightMax",{description:"Noise band max height"}),S("nMin",{description:"Minimum number of noise bands"}),S("nMax",{description:"Maximum number of noise bands"}),j("brightnessMin",{description:"Minimum brightness modulation amount",min:-255,max:255}),j("brightnessMax",{description:"Maximum brightness modulation amount",min:-255,max:255}),j("noisiness",{description:"Probability of noising pixel"}),P("replace",{description:"Use brightness as absolute value instead of modulator"}),P("full",{description:"Don't band  noise the whole mess"})];const de=he;function ye(t){return ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ye(t)}function ge(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ve(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ge(Object(r),!0).forEach((function(e){var n,o,i,a;n=t,o=e,i=r[e],a=function(t,e){if("object"!=ye(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=ye(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o),(o="symbol"==ye(a)?a:a+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ge(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function be(t,e){var r=ve(ve({},we),e);if(!(r.multiplier>=1)){var n,o,i=t.getImageData(),a=i.width,s=i.height,c=i.data,u=r.multiplier,f=Math.max(2,0|r.density);for(o=0;o<s;o+=f)for(n=0;n<a;++n){var l=o*a*4+4*n;c[l++]*=u,c[l++]*=u,c[l++]*=u}t.setImageData(i)}}var we={multiplier:.7,density:2};be.paramDefaults=we,be.params=[j("multiplier",{description:"Brightness multiplier"}),S("density",{description:"Scanline density",min:2})];const Oe=be;function xe(t){return xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xe(t)}function je(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Se(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?je(Object(r),!0).forEach((function(e){var n,o,i,a;n=t,o=e,i=r[e],a=function(t,e){if("object"!=xe(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=xe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o),(o="symbol"==xe(a)?a:a+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):je(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Pe(t,e,r,n,o,i,a){var s,c,u,f,l,p,h,m,d=t.data,y=t.width;if(o){var g=K(i);for(n>0?(s=0,c=y,u=1):(s=y-1,c=0,u=-1),f=e;f<r;++f)for(l=f*y*4,n+=a,p=s;u<0?p>c:p<c;p+=u)h=l+4*p,m=l+4*tt(0|p+n,y),1&o&&(d[h]=g(d[h],d[m])),2&o&&(d[h+1]=g(d[h+1],d[m+1])),4&o&&(d[h+2]=g(d[h+2],d[m+2]))}}function Ee(t){var e=0;return(!t.randomChan||Q(0,100)<33)&&(e|=+t.chanR),(!t.randomChan||Q(0,100)<33)&&(e|=+t.chanG<<1),(!t.randomChan||Q(0,100)<33)&&(e|=+t.chanB<<2),e}function ke(t,e){var r=Se(Se({},Ie),e),n=Q(r.nMin,r.nMax);if(!(n<=0)){for(var o=t.getImageData(),i=0;i<n;i++){var a=Math.random()<r.driftProb?r.driftMag:0,s=Q(r.heightMin*o.height,r.heightMax*o.height),c=Q(r.offsetMin,r.offsetMax);if(!(s<=0)&&0!==c){var u=Ee(r),f=Q(0,o.height-s);Pe(o,f,f+s,c,u,r.blend,a)}}t.setImageData(o)}}var Ie={chanR:!0,chanG:!0,chanB:!0,randomChan:!0,blend:.8,driftProb:0,driftMag:1,heightMin:.02,heightMax:.02,nMin:0,nMax:10,offsetMin:-5,offsetMax:5};ke.paramDefaults=Ie,ke.params=[P("chanR",{description:"Glitch red channel?"}),P("chanG",{description:"Glitch green channel?"}),P("chanB",{description:"Glitch blue channel?"}),P("randomChan",{description:"Randomize glitched channels among those selected?"}),j("blend",{description:"Blending factor"}),j("driftProb",{description:"Drift probability"}),j("driftMag",{description:"Drift magnitude (pixels per line)",min:-2,max:2}),j("heightMin",{description:"Glitch slice height (%) (minimum)"}),j("heightMax",{description:"Glitch slice height (%) (maximum)"}),S("nMin",{description:"Number of slices (minimum)"}),S("nMax",{description:"Number of slices (maximum)"}),j("offsetMin",{description:"Glitch offset (minimum)",min:-100,max:100}),j("offsetMax",{description:"Glitch offset (maximum)",min:-100,max:100})];const De=ke;function Me(t){return Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Me(t)}function Ae(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Ce(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ae(Object(r),!0).forEach((function(e){var n,o,i,a;n=t,o=e,i=r[e],a=function(t,e){if("object"!=Me(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Me(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o),(o="symbol"==Me(a)?a:a+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ae(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Te(t,e,r,n){var o,i,a=t.width,s=e*a*4,c=r*a*4,u=new Uint8ClampedArray(t.data.buffer,s,c);for(o=s,i=1;i<n;++i)(o=s+c*i)+c<t.data.length&&t.data.set(u,o)}function Le(t,e){var r=Ce(Ce({},Be),e),n=Q(r.nMin,r.nMax);if(!(n<=0)){for(var o=t.getImageData(),i=0;i<n;++i){var a=Q(r.heightMin*o.height,r.heightMax*o.height),s=Q(r.repeatsMin,r.repeatsMax);Te(o,Q(0,o.height-a),a,s)}t.setImageData(o)}}var Be={nMin:0,nMax:5,heightMin:0,heightMax:.01,repeatsMin:0,repeatsMax:50};Le.paramDefaults=Be,Le.params=[S("nMin",{description:""}),S("nMax",{description:""}),j("heightMin",{description:"Slice height minimum (%)"}),j("heightMax",{description:"Slice height maximum (%)"}),S("repeatsMin",{description:""}),S("repeatsMax",{description:""})];const _e=Le;function Ue(t){return Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ue(t)}function Re(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Ne(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Re(Object(r),!0).forEach((function(e){var n,o,i,a;n=t,o=e,i=r[e],a=function(t,e){if("object"!=Ue(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Ue(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o),(o="symbol"==Ue(a)?a:a+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Re(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Fe(t,e){for(var r=Ne(Ne({},ze),e),n=t.getImageData(),o=n.height,i=n.width,a=n.data,s=0,c=0,u=0;u<o;u++){for(var f=0;f<i;f++){Q(0,65535)<r.xOffsetChance&&(s+=Z()<.5?-1:1),Q(0,65535)<r.yOffsetChance&&(c+=Z()<.5?-1:1),Q(0,65535)<r.offsetHalveChance&&(s=0|s/2,c=0|c/2);var l=et(f+s,0,i-1),p=et(u+c,0,o-1);if(l!==f||p!==u){var h=4*p*i+4*l,m=4*u*i+4*f;a[m++]=a[h++],a[m++]=a[h++],a[m++]=a[h++]}}r.offsetResetEveryLine&&(s=0,c=0)}t.setImageData(n)}var ze={xOffsetChance:100,yOffsetChance:500,offsetHalveChance:10,offsetResetEveryLine:!1};Fe.paramDefaults=ze,Fe.params=[S("xOffsetChance",{min:0,max:65535}),S("yOffsetChance",{min:0,max:65535}),S("offsetHalveChance",{min:0,max:65535}),P("offsetResetEveryLine")];const $e=Fe;function Xe(t){var e=t.getImageData();zt(e,$t),t.setImageData(e)}Xe.params=[];const qe=Xe;function Ge(t){return Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ge(t)}function Ye(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function We(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ye(Object(r),!0).forEach((function(e){var n,o,i,a;n=t,o=e,i=r[e],a=function(t,e){if("object"!=Ge(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Ge(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o),(o="symbol"==Ge(a)?a:a+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ye(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function He(t,e){var r=We(We({},Ve),e),n=t.getImageData(),o="tvdis_".concat(n.width,"_").concat(n.height),i=t.persist[o];i||(i=t.persist[o]=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:256,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:224,r=document.createElement("canvas");r.width=t,r.height=e;var n=r.getContext("2d");if(!n)throw new Error("oops");n.fillStyle="black",n.fillRect(0,0,t,e);for(var o=n.getImageData(0,0,t,e),i=0;i<e;++i)for(var a=0;a<t;++a){var s=2*(a/t-.5),c=2*(i/e-.5),u=1-(s*s+c*c);u=Math.cos(3.141*u/2);var f=Math.atan2(c,s),l=125*-Math.cos(f)*u,p=125*-Math.sin(f)*u,h=i*t*4+4*a;o.data[h]=127+l,o.data[h+1]=127+p,o.data[h+2]=127}return n.putImageData(o,0,0),r}(n.width,n.height));var a=function(t,e,r,n){if(0===r&&0===n)return null;var o=t.width,i=t.height,a=document.createElement("canvas");a.width=o,a.height=i;var s=a.getContext("2d");if(!s)return null;s.drawImage(function(t){if(t.data&&t.width&&t.height){var e=document.createElement("canvas");e.width=t.width,e.height=t.height;var r=e.getContext("2d");return null==r||r.putImageData(t,0,0),e}if(t.getContext)return t;if(/HTML(Image|Video|Canvas)Element/.test("".concat(t)))return t;throw new Error("Can't make a drawable out of ".concat(t))}(e),0,0,o,i);for(var c=s.getImageData(0,0,o,i).data,u=t.data,f=new Uint8ClampedArray(u),l=0;l<i;++l)for(var p=l*o*4,h=0;h<o;++h){var m=p+4*h,d=c[m+2]/127,y=(c[m]-127)/128*r*d,g=(c[m+1]-127)/128*n*d,v=0|Math.round(h+y),b=et(0|Math.round(l+g),i)*o*4+4*et(v,o);f[m++]=u[b++],f[m++]=u[b++],f[m++]=u[b++]}return t.data.set(f),t}(n,i,r.strengthX,r.strengthY);a&&t.setImageData(a)}var Ve={strengthX:0,strengthY:0};He.paramDefaults=Ve,He.params=[S("strengthX",{description:"displacement strength (x)",min:-250,max:250}),S("strengthY",{description:"displacement strength (y)",min:-250,max:250})];const Je=He;function Ke(t){return Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ke(t)}function Qe(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Ze(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Qe(Object(r),!0).forEach((function(e){var n,o,i,a;n=t,o=e,i=r[e],a=function(t,e){if("object"!=Ke(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Ke(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o),(o="symbol"==Ke(a)?a:a+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Qe(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function tr(t,e){var r=Ze(Ze({},er),e);if(!(r.strength<=0||r.heightPerc<=0)){var n=t.getImageData();!function(t,e,r,n,o){var i,a,s,c,u=t.data,f=t.width,l=t.height,p=0|l*o,h=rt(e*r,l+p),m=h-p;for(i=0;i<l;++i)if(m<i&&i<h&&(a=255*Math.pow((i-m)/p,2)*n)>0)for(s=i*f*4,c=0;c<f;++c)u[s++]+=a,u[s++]+=a,u[s++]+=a,u[s++]=255}(n,t.clock,r.speed,r.strength,r.heightPerc),t.setImageData(n)}}var er={speed:.2,strength:.2,heightPerc:.2};tr.paramDefaults=er,tr.params=[j("speed",{description:"Scan speed"}),j("strength",{description:"Scan brightness"}),j("heightPerc",{description:"Scan height (percentage)"})];const rr=tr;function nr(t){return nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nr(t)}function or(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ir(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?or(Object(r),!0).forEach((function(e){var n,o,i,a;n=t,o=e,i=r[e],a=function(t,e){if("object"!=nr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=nr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o),(o="symbol"==nr(a)?a:a+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):or(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ar(t,e){var r=ir(ir({},sr),e),n=t.getSize(),o=n.width,i=n.height,a=t.getContext();a.globalAlpha=r.blend,a.globalCompositeOperation=r.operation,a.imageSmoothingEnabled=r.smooth,a.setTransform(1,0,0,1,0,0);var s=o/2,c=i/2;a.translate(s+r.xOffset/100*o,c+r.yOffset/100*i),a.rotate(.0174533*r.rotation),a.scale(r.xScale*(r.xFlip?-1:1),r.yScale*(r.yFlip?-1:1)),a.drawImage(a.canvas,-s,-c),a.setTransform(1,0,0,1,0,0),a.globalAlpha=1,a.globalCompositeOperation="source-over"}var sr={blend:1,operation:"source-over",rotation:0,smooth:!0,xFlip:!1,xOffset:0,xScale:1,yFlip:!1,yOffset:0,yScale:1};ar.paramDefaults=sr,ar.params=[P("xFlip"),P("yFlip"),j("rotation",{min:-360,max:360}),j("xScale",{min:0,max:50}),j("yScale",{min:0,max:50}),j("xOffset",{min:-100,max:100}),j("yOffset",{min:-100,max:100}),j("blend",{description:"blend"}),E("operation",k),P("smooth")];const cr=ar;function ur(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,u=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){u=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return fr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?fr(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function lr(t,e,r){t/=255,e/=255,r/=255;var n=Math.max(t,e,r),o=n-Math.min(t,e,r),i=o&&(n===t?(e-r)/o:n===e?2+(r-t)/o:4+(t-e)/o);return[60*(i<0?i+6:i),n?o/n:0,n]}function pr(t){return pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pr(t)}function hr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function mr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?hr(Object(r),!0).forEach((function(e){var n,o,i,a;n=t,o=e,i=r[e],a=function(t,e){if("object"!=pr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=pr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o),(o="symbol"==pr(a)?a:a+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):hr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function dr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,u=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){u=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return yr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?yr(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var gr={intensity:function(t){return(t[0]+t[1]+t[2])/3},red:function(t){return t[0]},green:function(t){return t[1]},blue:function(t){return t[2]},hue:function(t){var e=dr(t,3);return lr(e[0],e[1],e[2])[0]},sat:function(t){var e=dr(t,3);return 100*lr(e[0],e[1],e[2])[1]}},vr=Object.keys(gr).sort();function br(t,e){var r=mr(mr({},wr),e),n=r.threshold,o=r.metricXor,i=r.sortXor,a=r.metricFunc,s=r.sortFunc,c=r.writeOffset,u=r.mode,f=r.reverse,l=r.maxIntervalLength,p=gr[a],h=gr[s];if(p&&h){var m,d,y,g=t.getImageData(),v=g.width,b=g.height,w=g.data;"columns"===u?(m=v,d=b,y=function(t,e){return 4*(v*e+t)}):(m=b,d=v,y=function(t,e){return 4*(v*t+e)});for(var O=function(t){for(var e=[],r=null,a=0;a<d;a++){var s=y(t,a),u=[w[s],w[s+1],w[s+2]],m=p(u)^o;r&&(Math.abs(m-r.metricValue)>n||l>0&&r.pixels.length>l)&&(r=null),r?r.pixels.push(u):(r={start:a,metricValue:m,pixels:[u]},e.push(r))}e.forEach((function(e){var r,n=e.pixels,o=e.start,a=(r=function(t){return h(t)^i},n.map((function(t){return[t,r(t)]})).sort((function(t,e){var r=ur(t,2)[1],n=ur(e,2)[1];if(r!==n){if(r>n)return 1;if(r<n)return-1}return 0})).map((function(t){return ur(t,1)[0]})));f&&a.reverse();for(var s=0;s<a.length;s++){var u=dr(a[s],3),l=u[0],p=u[1],m=u[2],d=y(t,s+o)+c;w[d]=l,w[d+1]=p,w[d+2]=m}}))},x=0;x<m;x++)O(x);t.setImageData(g)}}var wr={threshold:50,maxIntervalLength:0,metricXor:0,sortXor:0,writeOffset:0,metricFunc:"intensity",sortFunc:"intensity",mode:"rows",reverse:!1};br.paramDefaults=wr,br.params=[S("threshold",{min:0,max:255}),S("maxIntervalLength",{min:0,max:1024}),S("metricXor",{min:0,max:255}),S("sortXor",{min:0,max:255}),S("writeOffset",{min:-65535,max:65535}),E("metricFunc",vr),E("sortFunc",vr),E("mode",["rows","columns"]),P("reverse")];const Or={afterimage:W,bitbang:st,bloom:yt,buffer_load:xt,buffer_save:It,desolve:Lt,elastic:Ft,ffblur:B,ffbrightness:_,ffcontrast:U,ffhue:N,ffsaturate:R,from_ycbcr:Gt,jpeg:ee,leak:ce,noise:de,pixelsort:br,scanlines:Oe,sliceglitch:De,slicerep:_e,streak:$e,to_ycbcr:qe,tv_displacement:Je,tvscan:rr,xform:cr};function xr(t){return xr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xr(t)}function jr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Sr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Pr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Sr(Object(r),!0).forEach((function(e){var n,o,i;n=t,o=e,i=r[e],(o=kr(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Sr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Er(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,kr(n.key),n)}}function kr(t){var e=function(t,e){if("object"!=xr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=xr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==xr(e)?e:e+""}var Ir=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.modules=e,this.defs=[]},e=[{key:"addModule",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.modules[t];if(!r)throw new Error("Unknown module: ".concat(t));var n=Pr(Pr({},r.paramDefaults||{}),e),o={id:(0|4294967295*Math.random()).toString(36),module:r,moduleName:t,options:n,enabled:!0,uiVisible:!0,probability:1};return this.defs.push(o),o}},{key:"duplicateDef",value:function(t){var e=this.addModule(t.moduleName,t.options);e.enabled=t.enabled,e.probability=t.probability}},{key:"deleteDef",value:function(t){this.defs=this.defs.filter((function(e){return e!==t&&e.id!==t}))}},{key:"clear",value:function(){this.defs=[]}},{key:"moveDef",value:function(t,e){var r,n,o=this.defs,i=o.indexOf(t);if(-1!==i){var a=(r=o.splice(i,1),n=1,function(t){if(Array.isArray(t))return t}(r)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,u=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){u=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}(r,n)||function(t,e){if(t){if("string"==typeof t)return jr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?jr(t,e):void 0}}(r,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0],s=i+e;s<0&&(s=0),s>=o.length&&(s=o.length),o.splice(s,0,a)}}},{key:"serialize",value:function(){return JSON.stringify({defs:this.defs.map((function(t){var e=t.enabled;return{id:t.id,moduleName:t.moduleName,options:t.options,enabled:!!e,probability:+t.probability}}))})}},{key:"unserialize",value:function(t){var e=this,r=JSON.parse(t);this.defs=[],r.defs.forEach((function(t){var r;try{r=e.addModule(t.moduleName,t.options)}catch(t){return}r.id=t.id,r.enabled=t.enabled,r.probability=t.probability}))}},{key:"loadFromLocalStorage",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"GlitcherState",e=window.localStorage&&window.localStorage[t];e&&this.unserialize(e)}},{key:"saveIntoLocalStorage",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"GlitcherState";window.localStorage&&(window.localStorage[t]=this.serialize())}}],e&&Er(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();const Dr=Ir;function Mr(t){return Mr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mr(t)}function Ar(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Tr(n.key),n)}}function Cr(t,e,r){return(e=Tr(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Tr(t){var e=function(t,e){if("object"!=Mr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Mr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Mr(e)?e:e+""}var Lr=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Cr(this,"_imageData",null),Cr(this,"clock",+new Date),Cr(this,"persist",{}),this._canvas=e;var r=e.getContext("2d");if(!r)throw new Error("Unable to get context");this._context=r},(e=[{key:"getImageData",value:function(){return this._imageData?this._imageData:this._context.getImageData(0,0,this._canvas.width,this._canvas.height)}},{key:"copyImageData",value:function(){return this._commitImageData(),this._context.getImageData(0,0,this._canvas.width,this._canvas.height)}},{key:"setImageData",value:function(t){this._imageData!==t&&(this._commitImageData(),this._imageData=t)}},{key:"_commitImageData",value:function(){this._imageData&&(this._context.putImageData(this._imageData,0,0),this._imageData=null)}},{key:"getContext",value:function(){return this._commitImageData(),this._context}},{key:"copyCanvas",value:function(){var t=document.createElement("canvas");t.width=this._canvas.width,t.height=this._canvas.height;var e=t.getContext("2d");if(!e)throw new Error("unable to get context");return this._commitImageData(),e.drawImage(this._canvas,0,0),t}},{key:"finalize",value:function(){this._commitImageData()}},{key:"getSize",value:function(){var t=this._canvas;return{width:t.width,height:t.height}}}])&&Ar(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function Br(t){return Br="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Br(t)}function _r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ur(n.key),n)}}function Ur(t){var e=function(t,e){if("object"!=Br(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Br(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Br(e)?e:e+""}var Rr=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.rate=40,this.state=new Dr(Or),this.sourceImage=null,this.targetCanvas=e,this.glitchContext=new Lr(e),this.renderTime=0},e=[{key:"renderFrame",value:function(){var t=this.sourceImage,e=this.targetCanvas,r=this.glitchContext,n=this.state;if(null!=t&&t.complete){var o=+new Date;e.width=0|t.width,e.height=0|t.height,r.clock=+new Date,r.getContext().drawImage(t,0,0),n&&n.defs.forEach((function(t){if(t.enabled&&!(t.probability<=0||t.probability<Math.random())){var e=+new Date;t.module(r,t.options);var n=+new Date;t.renderTime=n-e}})),r.finalize();var i=+new Date;this.renderTime=i-o}}},{key:"renderLoop",value:function(){var t=this;try{this.rate>0&&this.renderFrame()}finally{setTimeout((function(){t.renderLoop()}),Math.max(2,4e3/this.rate))}}},{key:"toDataURL",value:function(){return this.targetCanvas.toDataURL()}},{key:"toURL",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"image/png",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o="function"==typeof this.targetCanvas.toBlob&&"function"==typeof URL.createObjectURL;return new Promise((function(i){o&&!n?t.targetCanvas.toBlob((function(t){if(!t)throw new Error("Failed to create blob");i(URL.createObjectURL(t))}),e,r):i(t.targetCanvas.toDataURL(e,r))}))}}],e&&_r(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();const Nr=Rr;var Fr=r(72),zr=r.n(Fr),$r=r(825),Xr=r.n($r),qr=r(659),Gr=r.n(qr),Yr=r(56),Wr=r.n(Yr),Hr=r(540),Vr=r.n(Hr),Jr=r(113),Kr=r.n(Jr),Qr=r(30),Zr={};Zr.styleTagTransform=Kr(),Zr.setAttributes=Wr(),Zr.insert=Gr().bind(null,"head"),Zr.domAPI=Xr(),Zr.insertStyleElement=Vr(),zr()(Qr.A,Zr),Qr.A&&Qr.A.locals&&Qr.A.locals;const tn=r.p+"b4d11750054098352c9f.jpg";if("undefined"==typeof window)throw new Error("Glitcher requires a browser-like environment.");window.addEventListener("load",(function(){var t=document.createElement("div");t.id="target-wrapper";var r=document.createElement("canvas");r.width=32,r.height=32,r.id="target",document.body.appendChild(t),t.appendChild(r);var n=new Nr(r);!function(t){var e=new Image;e.src=tn,t.sourceImage=e}(n),function(t){document.addEventListener("paste",(function(e){var r=e.clipboardData;if(r){var n=Array.from(r.items).find((function(t){return t.type.indexOf("image")>-1}));if(n&&confirm("Paste image into Glitch2?")){var o=n.getAsFile();if(!o)return void alert("Failed to paste image");var i=URL.createObjectURL(o),a=new Image;a.src=i,t.sourceImage=a}}}),!1)}(n),n.state.loadFromLocalStorage(),function(t){var r=document.createElement("div");r.id="ui-container",document.body.appendChild(r),e().mount(r,{oninit:function(e){return function(t,e){var r={engine:e,ui:{stateMgmt:!1,recorder:!0,image:!0,fx:!0,misc:!1,zoom:!1},recordFrames:[],gifRenderProgress:null};Object.assign(t.state,r)}(e,t)},view:b})}(n),n.renderLoop();var o="UA-282164-17";o&&function(t){if(t){var e=document.createElement("script"),r=document.createTextNode("\n  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){\n  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),\n  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)\n  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');\n  ga('create', '".concat(t,"', 'auto');\n  ga('send', 'pageview');\n"));e.appendChild(r),document.body.appendChild(e)}}(o)}),!1)})()})();